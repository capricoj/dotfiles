!function(){function fc(mU,kk,xG){function NC(Nc,sR){if(!kk[Nc]){if(!mU[Nc]){var Eo="function"==typeof require&&require;if(!sR&&Eo)return Eo(Nc,!0);if(Ay)return Ay(Nc,!0);var Zy=new Error("Cannot find module '"+Nc+"'");throw Zy.code="MODULE_NOT_FOUND",Zy}var jK=kk[Nc]={exports:{}};mU[Nc][0].call(jK.exports,(function(fc){var kk;return NC(mU[Nc][1][fc]||fc)}),jK,jK.exports,fc,mU,kk,xG)}return kk[Nc].exports}for(var Ay="function"==typeof require&&require,Nc=0;Nc<xG.length;Nc++)NC(xG[Nc]);return NC}return fc}()({1:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),fc("../../../darkmode-core/src/js/content/content")},{"../../../darkmode-core/src/js/content/content":3}],2:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.IMG_FILTER_ID=kk.MSG_CLEANUP=kk.ROOT_VARS_PREFIX=kk.META_PROPERTY=kk.STYLESHEET_COMMON_CLASSNAME=kk.PROXY_SELECTOR=kk.EVENT_PREFIX=kk.STYLESHEET_CORS_SELECTOR=kk.STYLESHEET_SYNC_SELECTOR=kk.STYLESHEET_ROOT_VARS_SELECTOR=kk.STYLESHEET_INLINE_SELECTOR=kk.STYLESHEET_OVERRIDE_SELECTOR=kk.STYLESHEET_VARIABLES_SELECTOR=kk.STYLESHEET_INVERT_SELECTOR=kk.STYLESHEET_TEXT_SELECTOR=kk.STYLESHEET_USER_AGENT_SELECTOR=kk.STYLESHEET_FALLBACK_SELECTOR=kk.MISC_PREFIX=void 0;const xG=fc("./prefix");kk.MISC_PREFIX=xG.PREFIX,kk.STYLESHEET_FALLBACK_SELECTOR=`.${xG.PREFIX}-fb`,kk.STYLESHEET_USER_AGENT_SELECTOR=`.${xG.PREFIX}-ua`,kk.STYLESHEET_TEXT_SELECTOR=`.${xG.PREFIX}-tx`,kk.STYLESHEET_INVERT_SELECTOR=`.${xG.PREFIX}-iv`,kk.STYLESHEET_VARIABLES_SELECTOR=`.${xG.PREFIX}-vb`,kk.STYLESHEET_OVERRIDE_SELECTOR=`.${xG.PREFIX}-or`,kk.STYLESHEET_INLINE_SELECTOR=`.${xG.PREFIX}-il`,kk.STYLESHEET_ROOT_VARS_SELECTOR=`.${xG.PREFIX}-rv`,kk.STYLESHEET_SYNC_SELECTOR=`.${xG.PREFIX}-sn`,kk.STYLESHEET_CORS_SELECTOR=`.${xG.PREFIX}-cr`,kk.EVENT_PREFIX=`__${xG.PREFIX}__`,kk.PROXY_SELECTOR=`.${xG.PREFIX}-pr`,kk.STYLESHEET_COMMON_CLASSNAME=`${xG.PREFIX}m2`,kk.META_PROPERTY=xG.PREFIX,kk.ROOT_VARS_PREFIX=xG.PREFIX,kk.MSG_CLEANUP=kk.EVENT_PREFIX+"cleanUp",kk.IMG_FILTER_ID=`${xG.PREFIX}-image-filter`},{"./prefix":30}],3:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0});const xG=fc("../const"),NC=fc("../defaults"),Ay=fc("./dynamic-theme"),Nc=fc("./utils/dom");async function sR(fc,mU,kk){"cleanStyle"===(null==fc?void 0:fc.action)&&(0,Ay.removeDynamicTheme)()}function Eo(){(0,Nc.removeNode)(document.querySelector(xG.STYLESHEET_FALLBACK_SELECTOR))}async function Zy(){chrome.runtime.onMessage.addListener(sR);const fc=await chrome.runtime.sendMessage({action:"getStyle"});if(fc){const mU=window.top===window;(0,Ay.createOrUpdateDynamicTheme)(NC.DEFAULT_THEME,fc,mU)}else Eo()}Zy()},{"../const":2,"../defaults":21,"./dynamic-theme":8,"./utils/dom":19}],4:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.createAdoptedStyleSheetOverride=void 0;const xG=fc("./stylesheet-modifier"),NC=new WeakMap,Ay=new WeakSet;function Nc(fc){let mU=!1;function kk(mU,kk){const xG=[...fc.adoptedStyleSheets],NC=xG.indexOf(mU),Ay=xG.indexOf(kk);NC!==Ay-1&&(Ay>=0&&xG.splice(Ay,1),xG.splice(NC+1,0,kk),fc.adoptedStyleSheets=xG)}function Nc(){mU=!0;const kk=[...fc.adoptedStyleSheets];fc.adoptedStyleSheets.forEach((fc=>{if(Ay.has(fc)){const mU=kk.indexOf(fc);mU>=0&&kk.splice(mU,1),NC.delete(fc),Ay.delete(fc)}})),fc.adoptedStyleSheets=kk}function sR(Nc,sR){fc.adoptedStyleSheets.forEach((fc=>{if(Ay.has(fc))return;const Eo=fc.rules,Zy=new CSSStyleSheet;function jK(){for(let fc=Zy.cssRules.length-1;fc>=0;fc--)Zy.deleteRule(fc);return kk(fc,Zy),NC.set(fc,Zy),Ay.add(Zy),Zy}const PU=undefined;(0,xG.createStyleSheetModifier)().modifySheet({prepareSheet:jK,sourceCSSRules:Eo,theme:Nc,ignoreImageAnalysis:sR,force:!1,isAsyncCancelled:()=>mU})}))}return{render:sR,destroy:Nc}}kk.createAdoptedStyleSheetOverride=Nc},{"./stylesheet-modifier":15}],5:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.replaceCSSFontFace=kk.removeCSSComments=kk.replaceCSSRelativeURLsWithAbsolute=kk.getCSSBaseBath=kk.getCSSURLValue=kk.cssImportRegex=kk.cssURLRegex=kk.iterateCSSDeclarations=kk.iterateCSSRules=void 0;const xG=fc("../../utils/array"),NC=fc("../../utils/platform"),Ay=fc("../../utils/url"),Nc=fc("../utils/log");function sR(fc,mU,kk){(0,xG.forEach)(fc,(fc=>{if(fc.selectorText)mU(fc);else if(fc.href)try{sR(fc.styleSheet.cssRules,mU,kk)}catch(fc){(0,Nc.logInfo)(`Found a non-loaded link.`),kk&&kk()}else if(fc.media){const xG=Array.from(fc.media),NC=xG.some((fc=>fc.startsWith("screen")||fc.startsWith("all")||fc.startsWith("("))),Ay=xG.some((fc=>fc.startsWith("print")||fc.startsWith("speech")));!NC&&Ay||sR(fc.cssRules,mU,kk)}else fc.conditionText?CSS.supports(fc.conditionText)&&sR(fc.cssRules,mU,kk):(0,Nc.logWarn)(`CSSRule type not supported`,fc)}))}kk.iterateCSSRules=sR;const Eo=["background","border","border-color","border-bottom","border-left","border-right","border-top","outline","outline-color"],Zy=NC.isSafari?Eo.map((fc=>{const mU=undefined;return[fc,new RegExp(`${fc}:\\s*(.*?)\\s*;`)]})):null;function jK(fc,mU){(0,xG.forEach)(fc,(kk=>{const xG=fc.getPropertyValue(kk).trim();xG&&mU(kk,xG)}));const kk=fc.cssText;kk.includes("var(")&&(NC.isSafari?Zy.forEach((([fc,xG])=>{const NC=kk.match(xG);if(NC&&NC[1]){const kk=NC[1].trim();mU(fc,kk)}})):Eo.forEach((kk=>{const xG=fc.getPropertyValue(kk);xG&&xG.includes("var(")&&mU(kk,xG)})))}function PU(fc){return fc.trim().replace(/[\n\r\\]+/g,"").replace(/^url\((.*)\)$/,"$1").trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1").replace(/(?:\\(.))/g,"$1")}function wM(fc){const mU=(0,Ay.parseURL)(fc);return`${mU.origin}${mU.pathname.replace(/\?.*$/,"").replace(/(\/)([^\/]+)$/i,"$1")}`}function pR(fc,mU){return fc.replace(kk.cssURLRegex,(fc=>{const kk=PU(fc);try{return`url('${(0,Ay.getAbsoluteURL)(mU,kk)}')`}catch(mU){return(0,Nc.logWarn)("Not able to replace relative URL with Absolute URL, skipping"),fc}}))}kk.iterateCSSDeclarations=jK,kk.cssURLRegex=/url\((('.*?')|(".*?")|([^\)]*?))\)/g,kk.cssImportRegex=/@import\s*(url\()?(('.+?')|(".+?")|([^\)]*?))\)? ?(screen)?;?/gi,kk.getCSSURLValue=PU,kk.getCSSBaseBath=wM,kk.replaceCSSRelativeURLsWithAbsolute=pR;const fx=/\/\*[\s\S]*?\*\//g;function gW(fc){return fc.replace(fx,"")}kk.removeCSSComments=gW;const ZR=/@font-face\s*{[^}]*}/g;function wZ(fc){return fc.replace(ZR,"")}kk.replaceCSSFontFace=wZ},{"../../utils/array":31,"../../utils/platform":41,"../../utils/url":46,"../utils/log":20}],6:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.combineFixes=kk.findRelevantFix=void 0;const xG=fc("../utils/log"),NC=fc("../../utils/url");function Ay(fc,mU){if(!Array.isArray(mU)||0===mU.length||"*"!==mU[0].url[0])return(0,xG.logWarn)("selectRelevantFix() failed to construct a single fix",fc,mU),null;let kk=0,Ay=null;for(let xG=1;xG<mU.length;xG++)if((0,NC.isURLInList)(fc,mU[xG].url)){const fc=mU[xG].url[0].length;(null===Ay||kk<fc)&&(kk=fc,Ay=xG)}return Ay}function Nc(fc){if(0===fc.length||"*"!==fc[0].url[0])return(0,xG.logWarn)("combineFixes() failed to construct a single fix",fc),null;function mU(fc){return fc.filter(Boolean).flat()}return{url:[],invert:mU(fc.map((fc=>fc.invert))),css:fc.map((fc=>fc.css)).filter(Boolean).join("\n"),ignoreInlineStyle:mU(fc.map((fc=>fc.ignoreInlineStyle))),ignoreImageAnalysis:mU(fc.map((fc=>fc.ignoreImageAnalysis))),disableStyleSheetsProxy:fc.some((fc=>fc.disableStyleSheetsProxy))}}kk.findRelevantFix=Ay,kk.combineFixes=Nc},{"../../utils/url":46,"../utils/log":20}],7:[function(fc,mU,kk){"use strict";var xG=void 0&&(void 0).__importDefault||function(fc){return fc&&fc.__esModule?fc:{default:fc}};Object.defineProperty(kk,"__esModule",{value:!0}),kk.cleanImageProcessingCache=kk.getFilteredImageDataURL=kk.getImageDetails=void 0;const NC=fc("../../generators/svg-filter"),Ay=fc("./network"),Nc=fc("../../utils/color"),sR=fc("../../utils/network"),Eo=fc("../utils/log"),Zy=xG(fc("../../utils/async-queue")),jK=fc("../../const"),PU=new Zy.default;async function wM(fc){return new Promise((async(mU,kk)=>{let xG;if(fc.startsWith("data:"))xG=fc;else try{xG=await pR(fc)}catch(fc){return void kk(fc)}try{const kk=await fx(xG);PU.addToQueue((()=>{mU(Object.assign({src:fc,dataURL:xG,width:kk.naturalWidth,height:kk.naturalHeight},DM(kk)))}))}catch(fc){kk(fc)}}))}async function pR(fc){const mU=undefined;return new URL(fc).origin===location.origin?await(0,sR.loadAsDataURL)(fc):await(0,Ay.bgFetch)({url:fc,responseType:"data-url"})}async function fx(fc){return new Promise(((mU,kk)=>{const xG=new Image;xG.onload=()=>mU(xG),xG.onerror=()=>kk(`Unable to load image ${fc}`),xG.src=fc}))}kk.getImageDetails=wM;const gW=32*32;let ZR,wZ;function iR(){const fc=gW,mU=gW;ZR=document.createElement("canvas"),ZR.width=fc,ZR.height=mU,wZ=ZR.getContext("2d",{willReadFrequently:!0}),wZ.imageSmoothingEnabled=!1}function Vd(){ZR=null,wZ=null}const fQ=5*1024*1024;function DM(fc){ZR||iR();const{naturalWidth:mU,naturalHeight:kk}=fc;if(0===kk||0===mU)return(0,Eo.logWarn)(`logWarn(Image is empty ${fc.currentSrc})`),{isDark:!1,isLight:!1,isTransparent:!1,isLarge:!1,isTooLarge:!1};const xG=undefined;if(mU*kk*4>fQ)return(0,Eo.logInfo)("Skipped large image analyzing(Larger than 5mb in memory)"),{isDark:!1,isLight:!1,isTransparent:!1,isLarge:!1,isTooLarge:!0};const NC=mU*kk,Ay=Math.min(1,Math.sqrt(gW/NC)),sR=Math.ceil(mU*Ay),Zy=Math.ceil(kk*Ay);wZ.clearRect(0,0,sR,Zy),wZ.drawImage(fc,0,0,mU,kk,0,0,sR,Zy);const jK=undefined,PU=wZ.getImageData(0,0,sR,Zy).data,wM=.05,pR=.4,fx=.7;let Vd=0,DM=0,aY=0,Xi,oq,DX,Tu,QP,We,ns,ZF;for(DX=0;DX<Zy;DX++)for(oq=0;oq<sR;oq++)Xi=4*(DX*sR+oq),Tu=PU[Xi+0],QP=PU[Xi+1],We=PU[Xi+2],ns=PU[Xi+3],ns/255<wM?Vd++:(ZF=(0,Nc.getSRGBLightness)(Tu,QP,We),ZF<pR&&DM++,ZF>fx&&aY++);const aD=sR*Zy,Nq=aD-Vd,vn=undefined,ua=undefined,lQ=undefined,eS=undefined;return{isDark:DM/Nq>=.7,isLight:aY/Nq>=.7,isTransparent:Vd/aD>=.1,isLarge:NC>=800*600,isTooLarge:!1}}function aY({dataURL:fc,width:mU,height:kk},xG){const Ay=(0,NC.getSVGFilterMatrixValue)(xG),Nc=[`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${mU}" height="${kk}">`,"<defs>",`<filter id="${jK.IMG_FILTER_ID}">`,`<feColorMatrix type="matrix" values="${Ay}" />`,"</filter>","</defs>",`<image width="${mU}" height="${kk}" filter="url(#${jK.IMG_FILTER_ID})" xlink:href="${fc}" />`,"</svg>"].join("");return`data:image/svg+xml;base64,${btoa(Nc)}`}function Xi(){PU&&PU.stopQueue(),Vd()}kk.getFilteredImageDataURL=aY,kk.cleanImageProcessingCache=Xi},{"../../const":2,"../../generators/svg-filter":24,"../../utils/async-queue":32,"../../utils/color":34,"../../utils/network":39,"../utils/log":20,"./network":13}],8:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.cleanDynamicThemeCache=kk.removeDynamicTheme=kk.createOrUpdateDynamicThemeInternal=kk.createOrUpdateDynamicTheme=void 0;const xG=fc("./inline-style"),NC=fc("./meta-theme-color"),Ay=fc("./modify-css"),Nc=fc("./style-manager"),sR=fc("./watch"),Eo=fc("../../utils/array"),Zy=fc("../utils/dom"),jK=fc("../utils/log"),PU=fc("../../utils/throttle"),wM=fc("../../utils/math"),pR=fc("../../generators/css-filter"),fx=fc("../../generators/modify-colors"),gW=fc("../../generators/text-style"),ZR=fc("../../utils/uid"),wZ=fc("./adopted-style-manger"),iR=fc("../../utils/platform"),Vd=fc("../../utils/color"),fQ=fc("../../utils/url"),DM=fc("./variables"),aY=fc("../../utils/visibility"),Xi=fc("./fixes"),oq=fc("../../const"),DX=fc("./mv3-proxy"),Tu=!1,QP=(0,ZR.generateUID)(),We=new Map,ns=[];let ZF=null,aD=null,Nq=null,vn=[],ua=[];function lQ(fc,mU=document.head||document){let kk=mU.querySelector(fc);return kk||(kk=document.createElement("style"),kk.classList.add(oq.STYLESHEET_COMMON_CLASSNAME),kk.classList.add(fc.substring(1)),kk.media="screen",kk.textContent=""),kk}function eS(fc){(0,jK.logInfo)("MV3 proxy injector: regular path attempts to inject...");const mU=document.createElement("script");mU.src=chrome.runtime.getURL("js/proxy.js"),mU.dataset.arg=JSON.stringify(fc),document.head.prepend(mU)}const vy=new Map;function CL(fc,mU){vy.has(mU)&&vy.get(mU).stop(),vy.set(mU,(0,Zy.watchForNodePosition)(fc,"head"))}function mE(){(0,Eo.forEach)(vy.values(),(fc=>fc.stop())),vy.clear()}function vG(){const fc=lQ(oq.STYLESHEET_FALLBACK_SELECTOR,document);fc.textContent=(0,Ay.getModifiedFallbackStyle)(ZF,{strict:!0}),document.head.insertBefore(fc,document.head.firstChild),CL(fc,"fallback");const mU=lQ(oq.STYLESHEET_USER_AGENT_SELECTOR);mU.textContent=(0,Ay.getModifiedUserAgentStyle)(ZF,Nq,ZF.styleSystemControls),document.head.insertBefore(mU,fc.nextSibling),CL(mU,"user-agent");const kk=lQ(oq.STYLESHEET_TEXT_SELECTOR);ZF.useFont||ZF.textStroke>0?kk.textContent=(0,gW.createTextStyle)(ZF):kk.textContent="",document.head.insertBefore(kk,fc.nextSibling),CL(kk,"text");const NC=lQ(oq.STYLESHEET_INVERT_SELECTOR);aD&&Array.isArray(aD.invert)&&aD.invert.length>0?NC.textContent=[`${aD.invert.join(", ")} {`,`    filter: ${(0,pR.getCSSFilterValue)(Object.assign(Object.assign({},ZF),{contrast:0===ZF.mode?ZF.contrast:(0,wM.clamp)(ZF.contrast-10,0,100)}))} !important;`,"}"].join("\n"):NC.textContent="",document.head.insertBefore(NC,kk.nextSibling),CL(NC,"invert");const Nc=lQ(oq.STYLESHEET_INLINE_SELECTOR);Nc.textContent=(0,xG.getInlineOverrideStyle)(),document.head.insertBefore(Nc,NC.nextSibling),CL(Nc,"inline");const sR=lQ(oq.STYLESHEET_OVERRIDE_SELECTOR);sR.textContent=aD&&aD.css?dk(aD.css):"",document.head.appendChild(sR),CL(sR,"override");const Eo=lQ(oq.STYLESHEET_VARIABLES_SELECTOR),Zy=(0,Ay.getSelectionColor)(ZF),{darkSchemeBackgroundColor:jK,darkSchemeTextColor:PU,lightSchemeBackgroundColor:ZR,lightSchemeTextColor:wZ,mode:iR}=ZF;let fQ=0===iR?ZR:jK,DM=0===iR?wZ:PU;fQ=(0,fx.modifyBackgroundColor)((0,Vd.parseColorWithCache)(fQ),ZF),DM=(0,fx.modifyForegroundColor)((0,Vd.parseColorWithCache)(DM),ZF),Eo.textContent=[`:root {`,`   --${oq.ROOT_VARS_PREFIX}-neutral-background: ${fQ};`,`   --${oq.ROOT_VARS_PREFIX}-neutral-text: ${DM};`,`   --${oq.ROOT_VARS_PREFIX}-selection-background: ${Zy.backgroundColorSelection};`,`   --${oq.ROOT_VARS_PREFIX}-selection-text: ${Zy.foregroundColorSelection};`,`}`].join("\n"),document.head.insertBefore(Eo,Nc.nextSibling),CL(Eo,"variables");const aY=lQ(oq.STYLESHEET_ROOT_VARS_SELECTOR);document.head.insertBefore(aY,Eo.nextSibling);const Xi=!(aD&&aD.disableStyleSheetsProxy);eS(Xi),document.dispatchEvent(new CustomEvent(DX.EVENT_ARG,{detail:Xi}))}const kv=new Set;function IV(fc){const mU=lQ(oq.STYLESHEET_INLINE_SELECTOR,fc);mU.textContent=(0,xG.getInlineOverrideStyle)(),fc.insertBefore(mU,fc.firstChild);const kk=lQ(oq.STYLESHEET_OVERRIDE_SELECTOR,fc);kk.textContent=aD&&aD.css?dk(aD.css):"",fc.insertBefore(kk,mU.nextSibling);const NC=lQ(oq.STYLESHEET_INVERT_SELECTOR,fc);aD&&Array.isArray(aD.invert)&&aD.invert.length>0?NC.textContent=[`${aD.invert.join(", ")} {`,`    filter: ${(0,pR.getCSSFilterValue)(Object.assign(Object.assign({},ZF),{contrast:0===ZF.mode?ZF.contrast:(0,wM.clamp)(ZF.contrast-10,0,100)}))} !important;`,"}"].join("\n"):NC.textContent="",fc.insertBefore(NC,kk.nextSibling),kv.add(fc)}function dk(fc){return fc.replace(/\${(.+?)}/g,((fc,mU)=>{const kk=(0,Vd.parseColorWithCache)(mU);return kk?(0,fx.modifyColor)(kk,ZF):((0,jK.logWarn)("Couldn't parse CSSTemplate's color."),mU)}))}function ud(){const fc=document.querySelector(oq.STYLESHEET_FALLBACK_SELECTOR);fc&&(fc.textContent="")}function eW(){Rj();const fc=undefined,mU=(0,Nc.getManageableStyles)(document).filter((fc=>!We.has(fc))).map((fc=>bs(fc)));mU.map((fc=>fc.details({secondRound:!1}))).filter((fc=>fc&&fc.rules.length>0)).forEach((fc=>{DM.variablesStore.addRulesForMatching(fc.rules)})),DM.variablesStore.matchVariablesAndDependants(),DM.variablesStore.setOnRootVariableChange((()=>{const fc=lQ(oq.STYLESHEET_ROOT_VARS_SELECTOR);DM.variablesStore.putRootVars(fc,ZF)}));const kk=lQ(oq.STYLESHEET_ROOT_VARS_SELECTOR);DM.variablesStore.putRootVars(kk,ZF),We.forEach((fc=>fc.render(ZF,vn))),0===MR.size&&ud(),mU.forEach((fc=>fc.watch()));const NC=(0,Eo.toArray)(document.querySelectorAll(xG.INLINE_STYLE_SELECTOR));(0,Zy.iterateShadowHosts)(document.documentElement,(fc=>{IV(fc.shadowRoot);const mU=fc.shadowRoot.querySelectorAll(xG.INLINE_STYLE_SELECTOR);mU.length>0&&(0,Eo.push)(NC,mU)})),NC.forEach((fc=>(0,xG.overrideInlineStyle)(fc,ZF,ua,vn))),Cd(document)}let JX=0;const MR=new Set;function bs(fc){const mU=++JX;function kk(){if(!(0,Zy.isDOMReady)()||!(0,aY.documentIsVisible)()){MR.add(mU),(0,jK.logInfo)(`Current amount of styles loading: ${MR.size}`);const fc=document.querySelector(oq.STYLESHEET_FALLBACK_SELECTOR);fc.textContent||(fc.textContent=(0,Ay.getModifiedFallbackStyle)(ZF,{strict:!1}))}}function xG(){MR.delete(mU),(0,jK.logInfo)(`Removed loadingStyle ${mU}, now awaiting: ${MR.size}`),(0,jK.logInfo)(`To-do to be loaded`,MR),0===MR.size&&(0,Zy.isDOMReady)()&&ud()}function NC(){const fc=sR.details({secondRound:!0});fc&&(DM.variablesStore.addRulesForMatching(fc.rules),DM.variablesStore.matchVariablesAndDependants(),sR.render(ZF,vn))}(0,jK.logInfo)(`New manager for element, with loadingStyleID ${mU}`,fc);const sR=(0,Nc.manageStyle)(fc,{update:NC,loadingStart:kk,loadingEnd:xG});return We.set(fc,sR),sR}function ww(fc){const mU=We.get(fc);mU&&(mU.destroy(),We.delete(fc))}const St=(0,PU.throttle)((fc=>{We.forEach((fc=>fc.render(ZF,vn))),ns.forEach((fc=>fc.render(ZF,vn))),fc&&fc()})),Rj=function(){St.cancel()};function jy(){0!==MR.size?(0,jK.logWarn)(`DOM is ready, but still have styles being loaded.`,MR):ud()}function hp(){eW(),qB()}function ee(){vG(),(0,aY.documentIsVisible)()||ZF.immediateModify?hp():(0,aY.setDocumentVisibilityListener)(hp),(0,NC.changeMetaThemeColorWhenAvailable)(ZF)}function Cd(fc){try{if(Array.isArray(fc.adoptedStyleSheets)&&fc.adoptedStyleSheets.length>0){const mU=(0,wZ.createAdoptedStyleSheetOverride)(fc);ns.push(mU),mU.render(ZF,vn)}}catch(fc){(0,jK.logWarn)("Error occurred in handleAdoptedStyleSheets: ",fc)}}function qB(){const fc=Array.from(We.keys());(0,sR.watchForStyleChanges)(fc,(({created:fc,updated:mU,removed:kk,moved:xG})=>{const NC=kk,Ay=fc.concat(mU).concat(xG).filter((fc=>!We.has(fc))),Nc=xG.filter((fc=>We.has(fc)));(0,jK.logInfo)(`Styles to be removed:`,NC),NC.forEach((fc=>ww(fc)));const sR=Ay.map((fc=>bs(fc)));sR.map((fc=>fc.details({secondRound:!1}))).filter((fc=>fc&&fc.rules.length>0)).forEach((fc=>{DM.variablesStore.addRulesForMatching(fc.rules)})),DM.variablesStore.matchVariablesAndDependants(),sR.forEach((fc=>fc.render(ZF,vn))),sR.forEach((fc=>fc.watch())),Nc.forEach((fc=>We.get(fc).restore()))}),(fc=>{IV(fc),Cd(fc)})),(0,xG.watchForInlineStyles)((fc=>{if((0,xG.overrideInlineStyle)(fc,ZF,ua,vn),fc===document.documentElement){const mU=undefined;if((fc.getAttribute("style")||"").includes("--")){DM.variablesStore.matchVariablesAndDependants();const fc=lQ(oq.STYLESHEET_ROOT_VARS_SELECTOR.substring(1));DM.variablesStore.putRootVars(fc,ZF)}}}),(fc=>{IV(fc);const mU=fc.querySelectorAll(xG.INLINE_STYLE_SELECTOR);mU.length>0&&(0,Eo.forEach)(mU,(fc=>(0,xG.overrideInlineStyle)(fc,ZF,ua,vn)))})),(0,Zy.addDOMReadyListener)(jy)}function zj(){We.forEach((fc=>fc.pause())),mE(),(0,sR.stopWatchingForStyleChanges)(),(0,xG.stopWatchingForInlineStyles)(),(0,Zy.removeDOMReadyListener)(jy),(0,Zy.cleanReadyStateCompleteListeners)()}let bx;function di(){const fc=document.createElement("meta");fc.name=oq.META_PROPERTY,fc.content=QP,document.head.appendChild(fc)}function fR(){const fc=document.querySelector(`meta[name="${oq.META_PROPERTY}"]`);return fc?fc.content!==QP:(di(),!1)}function Hj(fc,mU){if(!mU)return null;if(0===mU.length||"*"!==mU[0].url[0])return(0,jK.logWarn)("selectRelevantFix() failed to construct a single fix",fc,mU),null;const kk=(0,Xi.findRelevantFix)(fc,mU);return kk?(0,Xi.combineFixes)([mU[0],mU[kk]]):mU[0]}function mV(fc,mU,kk){const xG=undefined;zm(fc,Hj(document.location.href,mU),kk)}function zm(fc,mU,kk){if(ZF=fc,aD=mU,aD?(vn=Array.isArray(aD.ignoreImageAnalysis)?aD.ignoreImageAnalysis:[],ua=Array.isArray(aD.ignoreInlineStyle)?aD.ignoreInlineStyle:[]):(vn=[],ua=[]),ZF.immediateModify&&(0,Zy.setIsDOMReady)((()=>!0)),Nq=kk,document.head){if(fR())return void AT();ee()}else{if(!iR.isFirefox){const fc=lQ(oq.STYLESHEET_FALLBACK_SELECTOR);document.documentElement.appendChild(fc),fc.textContent=(0,Ay.getModifiedFallbackStyle)(ZF,{strict:!0})}const fc=new MutationObserver((()=>{if(document.head){if(fc.disconnect(),fR())return void AT();ee()}}));fc.observe(document,{childList:!0,subtree:!0})}}function Iu(){document.dispatchEvent(new CustomEvent(oq.MSG_CLEANUP)),(0,Zy.removeNode)(document.head.querySelector(oq.PROXY_SELECTOR))}function AT(){vT(),(0,Zy.removeNode)(document.querySelector(oq.STYLESHEET_FALLBACK_SELECTOR)),document.head&&((0,NC.restoreMetaThemeColor)(),(0,Zy.removeNode)(document.head.querySelector(oq.STYLESHEET_USER_AGENT_SELECTOR)),(0,Zy.removeNode)(document.head.querySelector(oq.STYLESHEET_TEXT_SELECTOR)),(0,Zy.removeNode)(document.head.querySelector(oq.STYLESHEET_INVERT_SELECTOR)),(0,Zy.removeNode)(document.head.querySelector(oq.STYLESHEET_INLINE_SELECTOR)),(0,Zy.removeNode)(document.head.querySelector(oq.STYLESHEET_OVERRIDE_SELECTOR)),(0,Zy.removeNode)(document.head.querySelector(oq.STYLESHEET_VARIABLES_SELECTOR)),(0,Zy.removeNode)(document.head.querySelector(oq.STYLESHEET_ROOT_VARS_SELECTOR)),(0,Zy.removeNode)(document.head.querySelector(`meta[name="${oq.META_PROPERTY}"]`)),Iu()),kv.forEach((fc=>{(0,Zy.removeNode)(fc.querySelector(oq.STYLESHEET_INLINE_SELECTOR)),(0,Zy.removeNode)(fc.querySelector(oq.STYLESHEET_OVERRIDE_SELECTOR))})),kv.clear(),(0,Eo.forEach)(We.keys(),(fc=>ww(fc))),MR.clear(),(0,Nc.cleanLoadingLinks)(),(0,Eo.forEach)(document.querySelectorAll("."+oq.STYLESHEET_COMMON_CLASSNAME),Zy.removeNode),ns.forEach((fc=>{fc.destroy()})),ns.splice(0),bx&&bx.disconnect()}function vT(){DM.variablesStore.clear(),fQ.parsedURLCache.clear(),(0,aY.removeDocumentVisibilityListener)(),Rj(),zj(),(0,Ay.cleanModificationCache)(),(0,Vd.clearColorCache)()}kk.createOrUpdateDynamicTheme=mV,kk.createOrUpdateDynamicThemeInternal=zm,kk.removeDynamicTheme=AT,kk.cleanDynamicThemeCache=vT},{"../../const":2,"../../generators/css-filter":22,"../../generators/modify-colors":23,"../../generators/text-style":25,"../../utils/array":31,"../../utils/color":34,"../../utils/math":37,"../../utils/platform":41,"../../utils/throttle":43,"../../utils/uid":45,"../../utils/url":46,"../../utils/visibility":47,"../utils/dom":19,"../utils/log":20,"./adopted-style-manger":4,"./fixes":6,"./inline-style":9,"./meta-theme-color":10,"./modify-css":11,"./mv3-proxy":12,"./style-manager":14,"./variables":17,"./watch":18}],9:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.overrideInlineStyle=kk.stopWatchingForInlineStyles=kk.watchForInlineStyles=kk.getInlineOverrideStyle=kk.INLINE_STYLE_SELECTOR=void 0;const xG=fc("../../utils/array"),NC=fc("../utils/dom"),Ay=fc("./css-rules"),Nc=fc("./modify-css"),sR=fc("./variables"),Eo=fc("../../utils/platform"),Zy=fc("../../utils/time"),jK=fc("../../utils/throttle"),PU=fc("../../const"),wM={"background-color":{customProp:`--${PU.ROOT_VARS_PREFIX}-inline-bgcolor`,cssProp:"background-color",dataAttr:`data-${PU.ROOT_VARS_PREFIX}-inline-bgcolor`},"background-image":{customProp:`--${PU.ROOT_VARS_PREFIX}-inline-bgimage`,cssProp:"background-image",dataAttr:`data-${PU.ROOT_VARS_PREFIX}-inline-bgimage`},"border-color":{customProp:`--${PU.ROOT_VARS_PREFIX}-inline-border`,cssProp:"border-color",dataAttr:`data-${PU.ROOT_VARS_PREFIX}-inline-border`},"border-bottom-color":{customProp:`--${PU.ROOT_VARS_PREFIX}-inline-border-bottom`,cssProp:"border-bottom-color",dataAttr:`data-${PU.ROOT_VARS_PREFIX}-inline-border-bottom`},"border-left-color":{customProp:`--${PU.ROOT_VARS_PREFIX}-inline-border-left`,cssProp:"border-left-color",dataAttr:`data-${PU.ROOT_VARS_PREFIX}-inline-border-left`},"border-right-color":{customProp:`--${PU.ROOT_VARS_PREFIX}-inline-border-right`,cssProp:"border-right-color",dataAttr:`data-${PU.ROOT_VARS_PREFIX}-inline-border-right`},"border-top-color":{customProp:`--${PU.ROOT_VARS_PREFIX}-inline-border-top`,cssProp:"border-top-color",dataAttr:`data-${PU.ROOT_VARS_PREFIX}-inline-border-top`},"box-shadow":{customProp:`--${PU.ROOT_VARS_PREFIX}-inline-boxshadow`,cssProp:"box-shadow",dataAttr:`data-${PU.ROOT_VARS_PREFIX}-inline-boxshadow`},color:{customProp:`--${PU.ROOT_VARS_PREFIX}-inline-color`,cssProp:"color",dataAttr:`data-${PU.ROOT_VARS_PREFIX}-inline-color`},fill:{customProp:`--${PU.ROOT_VARS_PREFIX}-inline-fill`,cssProp:"fill",dataAttr:`data-${PU.ROOT_VARS_PREFIX}-inline-fill`},stroke:{customProp:`--${PU.ROOT_VARS_PREFIX}-inline-stroke`,cssProp:"stroke",dataAttr:`data-${PU.ROOT_VARS_PREFIX}-inline-stroke`},"outline-color":{customProp:`--${PU.ROOT_VARS_PREFIX}-inline-outline`,cssProp:"outline-color",dataAttr:`data-${PU.ROOT_VARS_PREFIX}-inline-outline`},"stop-color":{customProp:`--${PU.ROOT_VARS_PREFIX}-inline-stopcolor`,cssProp:"stop-color",dataAttr:`data-${PU.ROOT_VARS_PREFIX}-inline-stopcolor`}},pR=Object.values(wM),fx={};pR.forEach((({cssProp:fc,customProp:mU})=>fx[mU]=fc));const gW=["style","fill","stop-color","stroke","bgcolor","color"];function ZR(){return pR.map((({dataAttr:fc,customProp:mU,cssProp:kk})=>[`[${fc}] {`,`  ${kk}: var(${mU}) !important;`,"}"].join("\n"))).join("\n")}function wZ(fc){const mU=[];return fc instanceof Element&&fc.matches(kk.INLINE_STYLE_SELECTOR)&&mU.push(fc),(fc instanceof Element||Eo.isShadowDomSupported&&fc instanceof ShadowRoot||fc instanceof Document)&&(0,xG.push)(mU,fc.querySelectorAll(kk.INLINE_STYLE_SELECTOR)),mU}kk.INLINE_STYLE_SELECTOR=gW.map((fc=>`[${fc}]`)).join(", "),kk.getInlineOverrideStyle=ZR;const iR=new Map,Vd=new Map;function fQ(fc,mU){DM(document,fc,mU),(0,NC.iterateShadowHosts)(document.documentElement,(kk=>{DM(kk.shadowRoot,fc,mU)}))}function DM(fc,mU,kk){iR.has(fc)&&(iR.get(fc).disconnect(),Vd.get(fc).disconnect());const xG=new WeakSet;function Ay(fc){wZ(fc).forEach((fc=>{xG.has(fc)||(xG.add(fc),mU(fc))})),(0,NC.iterateShadowHosts)(fc,(NC=>{xG.has(fc)||(xG.add(fc),kk(NC.shadowRoot),DM(NC.shadowRoot,mU,kk))}))}const Nc=(0,NC.createOptimizedTreeObserver)(fc,{onMinorMutations:({additions:fc})=>{fc.forEach((fc=>Ay(fc)))},onHugeMutations:()=>{Ay(fc)}});iR.set(fc,Nc);let sR=0,Eo=null;const PU=(0,Zy.getDuration)({seconds:10}),wM=(0,Zy.getDuration)({seconds:2}),fx=50;let ZR=[],fQ=null;const aY=(0,jK.throttle)((fc=>{fc.forEach((fc=>{gW.includes(fc.attributeName)&&mU(fc.target)}))})),Xi=new MutationObserver((fc=>{if(fQ)return void ZR.push(...fc);sR++;const mU=Date.now();if(null==Eo)Eo=mU;else if(sR>=fx){if(mU-Eo<PU)return fQ=setTimeout((()=>{Eo=null,sR=0,fQ=null;const fc=ZR;ZR=[],aY(fc)}),wM),void ZR.push(...fc);Eo=mU,sR=1}aY(fc)}));Xi.observe(fc,{attributes:!0,attributeFilter:gW.concat(pR.map((({dataAttr:fc})=>fc))),subtree:!0}),Vd.set(fc,Xi)}function aY(){iR.forEach((fc=>fc.disconnect())),Vd.forEach((fc=>fc.disconnect())),iR.clear(),Vd.clear()}kk.watchForInlineStyles=fQ,kk.stopWatchingForInlineStyles=aY;const Xi=new WeakMap,oq=["brightness","contrast","grayscale","sepia","mode"];function DX(fc,mU){return gW.map((mU=>`${mU}="${fc.getAttribute(mU)}"`)).concat(oq.map((fc=>`${fc}="${mU[fc]}"`))).join(" ")}function Tu(fc,mU){for(let kk=0,xG=mU.length;kk<xG;kk++){const xG=mU[kk];if(fc.matches(xG))return!0}return!1}function QP(fc,mU,kk,Eo){const Zy=undefined;if(DX(fc,mU)===Xi.get(fc))return;const jK=new Set(Object.keys(wM));function PU(kk,xG,NC){const Ay=kk.startsWith("--"),{customProp:Zy,dataAttr:PU}=Ay?{}:wM[kk],pR=(0,Nc.getModifiableCSSDeclaration)(xG,NC,{style:fc.style},sR.variablesStore,Eo,null);if(!pR)return;let fx=pR.value;if("function"==typeof fx&&(fx=fx(mU)),Ay&&"object"==typeof fx){const mU=undefined;fx.declarations.forEach((({property:mU,value:kk})=>{!(kk instanceof Promise)&&fc.style.setProperty(mU,kk)}))}else fc.style.setProperty(Zy,fx),fc.hasAttribute(PU)||fc.setAttribute(PU,""),jK.delete(kk)}if(kk.length>0&&Tu(fc,kk))jK.forEach((mU=>{fc.removeAttribute(wM[mU].dataAttr)}));else{if(fc.hasAttribute("bgcolor")){let mU=fc.getAttribute("bgcolor");(mU.match(/^[0-9a-f]{3}$/i)||mU.match(/^[0-9a-f]{6}$/i))&&(mU=`#${mU}`),PU("background-color","background-color",mU)}if(fc.hasAttribute("color")&&"mask-icon"!==fc.rel){let mU=fc.getAttribute("color");(mU.match(/^[0-9a-f]{3}$/i)||mU.match(/^[0-9a-f]{6}$/i))&&(mU=`#${mU}`),PU("color","color",mU)}if(fc instanceof SVGElement){if(fc.hasAttribute("fill")){const mU=32,kk=fc.getAttribute("fill");if("none"!==kk)if(fc instanceof SVGTextElement)PU("fill","color",kk);else{const xG=()=>{const{width:xG,height:NC}=fc.getBoundingClientRect(),Ay=undefined;PU("fill",xG>mU||NC>mU?"background-color":"color",kk)};(0,NC.isReadyStateComplete)()?xG():(0,NC.addReadyStateCompleteListener)(xG)}}fc.hasAttribute("stop-color")&&PU("stop-color","background-color",fc.getAttribute("stop-color"))}if(fc.hasAttribute("stroke")){const mU=fc.getAttribute("stroke");PU("stroke",fc instanceof SVGLineElement||fc instanceof SVGTextElement?"border-color":"color",mU)}fc.style&&(0,Ay.iterateCSSDeclarations)(fc.style,((mU,kk)=>{if("background-image"!==mU||!kk.includes("url"))if(wM.hasOwnProperty(mU)||mU.startsWith("--")&&!fx[mU])PU(mU,mU,kk);else{const kk=fx[mU];if(kk&&!fc.style.getPropertyValue(kk)&&!fc.hasAttribute(kk)){if("background-color"===kk&&fc.hasAttribute("bgcolor"))return;fc.style.setProperty(mU,"")}}})),fc.style&&fc instanceof SVGTextElement&&fc.style.fill&&PU("fill","color",fc.style.getPropertyValue("fill")),(0,xG.forEach)(jK,(mU=>{fc.removeAttribute(wM[mU].dataAttr)})),Xi.set(fc,DX(fc,mU))}}kk.overrideInlineStyle=QP},{"../../const":2,"../../utils/array":31,"../../utils/platform":41,"../../utils/throttle":43,"../../utils/time":44,"../utils/dom":19,"./css-rules":5,"./modify-css":11,"./variables":17}],10:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.restoreMetaThemeColor=kk.changeMetaThemeColorWhenAvailable=void 0;const xG=fc("../../utils/color"),NC=fc("../../generators/modify-colors"),Ay=fc("../utils/log"),Nc="theme-color",sR=`meta[name="${Nc}"]`;let Eo=null,Zy=null;function jK(fc,mU){Eo=Eo||fc.content;const kk=(0,xG.parseColorWithCache)(Eo);kk?fc.content=(0,NC.modifyBackgroundColor)(kk,mU):(0,Ay.logWarn)("Invalid meta color",kk)}function PU(fc){const mU=document.querySelector(sR);mU?jK(mU,fc):(Zy&&Zy.disconnect(),Zy=new MutationObserver((mU=>{fc:for(let kk=0;kk<mU.length;kk++){const{addedNodes:xG}=mU[kk];for(let mU=0;mU<xG.length;mU++){const kk=xG[mU];if(kk instanceof HTMLMetaElement&&kk.name===Nc){Zy.disconnect(),Zy=null,jK(kk,fc);break fc}}}})),Zy.observe(document.head,{childList:!0}))}function wM(){Zy&&(Zy.disconnect(),Zy=null);const fc=document.querySelector(sR);fc&&Eo&&(fc.content=Eo)}kk.changeMetaThemeColorWhenAvailable=PU,kk.restoreMetaThemeColor=wM},{"../../generators/modify-colors":23,"../../utils/color":34,"../utils/log":20}],11:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.cleanModificationCache=kk.getShadowModifier=kk.getShadowModifierWithInfo=kk.getBgImageModifier=kk.getModifiedFallbackStyle=kk.getSelectionColor=kk.getModifiedUserAgentStyle=kk.getModifiableCSSDeclaration=void 0;const xG=fc("../../utils/color"),NC=fc("../../utils/math"),Ay=fc("../../utils/text"),Nc=fc("../../utils/url"),sR=fc("../../generators/modify-colors"),Eo=fc("./css-rules"),Zy=fc("./image"),jK=fc("../utils/log"),PU=fc("../../utils/platform"),wM=fc("../../utils/parsing");function pR(fc,mU){return Boolean(fc&&fc.getPropertyPriority(mU))}function fx(fc,mU,kk,xG,NC,Ay){if(fc.startsWith("--")){const Nc=ns(xG,fc,mU,kk,NC,Ay);if(Nc)return{property:fc,value:Nc,important:pR(kk.style,fc),sourceValue:mU}}else if(mU.includes("var(")){const NC=ZF(xG,fc,mU);if(NC)return{property:fc,value:NC,important:pR(kk.style,fc),sourceValue:mU}}else{if("color-scheme"===fc)return(0,jK.logWarn)("CSS property color-scheme is not supported"),null;if(fc.includes("color")&&"-webkit-print-color-adjust"!==fc||"fill"===fc||"stroke"===fc||"stop-color"===fc){const xG=aY(fc,mU,kk);if(xG)return{property:fc,value:xG,important:pR(kk.style,fc),sourceValue:mU}}else if("background-image"===fc||"list-style-image"===fc){const xG=Tu(mU,kk,NC,Ay);if(xG)return{property:fc,value:xG,important:pR(kk.style,fc),sourceValue:mU}}else if(fc.includes("shadow")){const xG=We(mU);if(xG)return{property:fc,value:xG,important:pR(kk.style,fc),sourceValue:mU}}}return null}function gW(...fc){return fc.filter(Boolean).join(", ")}function ZR(fc,mU,kk){const xG=[];mU||(xG.push("html {"),xG.push(`    background-color: ${(0,sR.modifyBackgroundColor)({r:255,g:255,b:255},fc)} !important;`),xG.push("}")),xG.push("html {"),xG.push(`    color-scheme: ${1===fc.mode?"dark":"dark light"} !important;`),xG.push("}");const NC=gW(mU?"":"html, body",kk?"input, textarea, select, button, dialog":"");return NC&&(xG.push(`${NC} {`),xG.push(`    background-color: ${(0,sR.modifyBackgroundColor)({r:255,g:255,b:255},fc)};`),xG.push("}")),xG.push(`${gW("html, body",kk?"input, textarea, select, button":"")} {`),xG.push(`    border-color: ${(0,sR.modifyBorderColor)({r:76,g:76,b:76},fc)};`),xG.push(`    color: ${(0,sR.modifyForegroundColor)({r:0,g:0,b:0},fc)};`),xG.push("}"),xG.push("a {"),xG.push(`    color: ${(0,sR.modifyForegroundColor)({r:0,g:64,b:255},fc)};`),xG.push("}"),xG.push("table {"),xG.push(`    border-color: ${(0,sR.modifyBorderColor)({r:128,g:128,b:128},fc)};`),xG.push("}"),xG.push("::placeholder {"),xG.push(`    color: ${(0,sR.modifyForegroundColor)({r:169,g:169,b:169},fc)};`),xG.push("}"),xG.push("input:-webkit-autofill,"),xG.push("textarea:-webkit-autofill,"),xG.push("select:-webkit-autofill {"),xG.push(`    background-color: ${(0,sR.modifyBackgroundColor)({r:250,g:255,b:189},fc)} !important;`),xG.push(`    color: ${(0,sR.modifyForegroundColor)({r:0,g:0,b:0},fc)} !important;`),xG.push("}"),fc.scrollbarColor&&xG.push(Vd(fc)),fc.selectionColor&&xG.push(iR(fc)),xG.join("\n")}function wZ(fc){let mU,kk;if("auto"===fc.selectionColor)mU=(0,sR.modifyBackgroundColor)({r:0,g:96,b:212},Object.assign(Object.assign({},fc),{grayscale:0})),kk=(0,sR.modifyForegroundColor)({r:255,g:255,b:255},Object.assign(Object.assign({},fc),{grayscale:0}));else{const NC=(0,xG.parseColorWithCache)(fc.selectionColor),Ay=(0,xG.rgbToHSL)(NC);mU=fc.selectionColor,kk=Ay.l<.5?"#FFF":"#000"}return{backgroundColorSelection:mU,foregroundColorSelection:kk}}function iR(fc){const mU=[],kk=wZ(fc),xG=kk.backgroundColorSelection,NC=kk.foregroundColorSelection;return["::selection","::-moz-selection"].forEach((fc=>{mU.push(`${fc} {`),mU.push(`    background-color: ${xG} !important;`),mU.push(`    color: ${NC} !important;`),mU.push("}")})),mU.join("\n")}function Vd(fc){const mU=[];let kk,Ay,Nc,Eo,Zy,jK;if("auto"===fc.scrollbarColor)kk=(0,sR.modifyBackgroundColor)({r:241,g:241,b:241},fc),Ay=(0,sR.modifyForegroundColor)({r:96,g:96,b:96},fc),Nc=(0,sR.modifyBackgroundColor)({r:176,g:176,b:176},fc),Eo=(0,sR.modifyBackgroundColor)({r:144,g:144,b:144},fc),Zy=(0,sR.modifyBackgroundColor)({r:96,g:96,b:96},fc),jK=(0,sR.modifyBackgroundColor)({r:255,g:255,b:255},fc);else{const mU=(0,xG.parseColorWithCache)(fc.scrollbarColor),sR=(0,xG.rgbToHSL)(mU),jK=sR.l>.5,PU=fc=>Object.assign(Object.assign({},sR),{l:(0,NC.clamp)(sR.l+fc,0,1)}),wM=fc=>Object.assign(Object.assign({},sR),{l:(0,NC.clamp)(sR.l-fc,0,1)});kk=(0,xG.hslToString)(wM(.4)),Ay=(0,xG.hslToString)(jK?wM(.4):PU(.4)),Nc=(0,xG.hslToString)(sR),Eo=(0,xG.hslToString)(PU(.1)),Zy=(0,xG.hslToString)(PU(.2))}return mU.push("::-webkit-scrollbar {"),mU.push(`    background-color: ${kk};`),mU.push(`    color: ${Ay};`),mU.push("}"),mU.push("::-webkit-scrollbar-thumb {"),mU.push(`    background-color: ${Nc};`),mU.push("}"),mU.push("::-webkit-scrollbar-thumb:hover {"),mU.push(`    background-color: ${Eo};`),mU.push("}"),mU.push("::-webkit-scrollbar-thumb:active {"),mU.push(`    background-color: ${Zy};`),mU.push("}"),mU.push("::-webkit-scrollbar-corner {"),mU.push(`    background-color: ${jK};`),mU.push("}"),PU.isFirefox&&(mU.push("* {"),mU.push(`    scrollbar-color: ${Nc} ${kk};`),mU.push("}")),mU.join("\n")}function fQ(fc,{strict:mU}){const kk=[],xG=["microsoft.com","docs.microsoft.com"].includes(location.hostname);return kk.push(`html, body, ${mU?`body :not(iframe)${xG?':not(div[style^="position:absolute;top:0;left:-"]':""}`:"body > :not(iframe)"} {`),kk.push(`    background-color: ${(0,sR.modifyBackgroundColor)({r:255,g:255,b:255},fc)} !important;`),kk.push(`    border-color: ${(0,sR.modifyBorderColor)({r:64,g:64,b:64},fc)} !important;`),kk.push(`    color: ${(0,sR.modifyForegroundColor)({r:0,g:0,b:0},fc)} !important;`),kk.push("}"),kk.join("\n")}kk.getModifiableCSSDeclaration=fx,kk.getModifiedUserAgentStyle=ZR,kk.getSelectionColor=wZ,kk.getModifiedFallbackStyle=fQ;const DM=new Set(["inherit","transparent","initial","currentcolor","none","unset"]);function aY(fc,mU,kk){if(DM.has(mU.toLowerCase()))return mU;const NC=(0,xG.parseColorWithCache)(mU);return NC?fc.includes("background")?kk.style.webkitMaskImage&&"none"!==kk.style.webkitMaskImage||kk.style.webkitMask&&!kk.style.webkitMask.startsWith("none")||kk.style.mask&&"none"!==kk.style.mask||kk.style.getPropertyValue("mask-image")&&"none"!==kk.style.getPropertyValue("mask-image")?fc=>(0,sR.modifyForegroundColor)(NC,fc):fc=>(0,sR.modifyBackgroundColor)(NC,fc):fc.includes("border")||fc.includes("outline")?fc=>(0,sR.modifyBorderColor)(NC,fc):fc=>(0,sR.modifyForegroundColor)(NC,fc):((0,jK.logWarn)("Couldn't parse color",mU),null)}const Xi=new Map,oq=new Map;function DX(fc,mU){if(!fc||0===mU.length)return!1;if(mU.some((fc=>"*"===fc)))return!0;const kk=fc.split(/,\s*/g);for(let fc=0;fc<mU.length;fc++){const xG=mU[fc];if(kk.some((fc=>fc===xG)))return!0}return!1}function Tu(fc,mU,kk,PU){try{const pR=(0,wM.parseGradient)(fc),fx=(0,Ay.getMatches)(Eo.cssURLRegex,fc);if(0===fx.length&&0===pR.length)return fc;const gW=mU=>{let kk=0;return mU.map((mU=>{const xG=fc.indexOf(mU,kk);return kk=xG+mU.length,{match:mU,index:xG}}))},ZR=pR.map((fc=>Object.assign({type:"gradient"},fc))).concat(gW(fx).map((fc=>Object.assign({type:"url",offset:0},fc)))).sort(((fc,mU)=>fc.index>mU.index?1:-1)),wZ=fc=>{const{typeGradient:mU,match:kk,hasComma:NC}=fc,Nc=/([^\(\),]+(\([^\(\)]*(\([^\(\)]*\)*[^\(\)]*)?\))?([^\(\), ]|( (?!calc)))*),?/g,Eo=/^(from|color-stop|to)\(([^\(\)]*?,\s*)?(.*?)\)$/,Zy=(0,Ay.getMatches)(Nc,kk,1).map((fc=>{fc=fc.trim();let mU=(0,xG.parseColorWithCache)(fc);if(mU)return fc=>(0,sR.modifyGradientColor)(mU,fc);const kk=fc.lastIndexOf(" ");if(mU=(0,xG.parseColorWithCache)(fc.substring(0,kk)),mU)return xG=>`${(0,sR.modifyGradientColor)(mU,xG)} ${fc.substring(kk+1)}`;const NC=fc.match(Eo);return NC&&(mU=(0,xG.parseColorWithCache)(NC[3]),mU)?fc=>`${NC[1]}(${NC[2]?`${NC[2]}, `:""}${(0,sR.modifyGradientColor)(mU,fc)})`:()=>fc}));return fc=>`${mU}(${Zy.map((mU=>mU(fc))).join(", ")})${NC?", ":""}`},iR=fc=>{var xG;if(DX(mU.selectorText,kk))return null;let NC=(0,Eo.getCSSURLValue)(fc);const Ay=0===NC.length,{parentStyleSheet:sR}=mU,wM=sR&&sR.href?(0,Eo.getCSSBaseBath)(sR.href):(null===(xG=sR.ownerNode)||void 0===xG?void 0:xG.baseURI)||location.origin;NC=(0,Nc.getAbsoluteURL)(wM,NC);const pR=`url("${NC}")`;return async fc=>{if(Ay)return"url('')";let mU;if(Xi.has(NC))mU=Xi.get(NC);else try{if(oq.has(NC)){const fc=oq.get(NC);if(mU=await new Promise((mU=>fc.push(mU))),!mU)return null}else oq.set(NC,[]),mU=await(0,Zy.getImageDetails)(NC),Xi.set(NC,mU),oq.get(NC).forEach((fc=>fc(mU))),oq.delete(NC);if(PU())return null}catch(fc){return(0,jK.logWarn)(fc),oq.has(NC)&&(oq.get(NC).forEach((fc=>fc(null))),oq.delete(NC)),pR}const kk=undefined;return Vd(mU,fc)||pR}},Vd=(fc,mU)=>{const{isDark:kk,isLight:xG,isTransparent:Ay,isLarge:Nc,isTooLarge:sR,width:Eo}=fc;let PU;if(sR)(0,jK.logInfo)(`Not modifying too large image ${fc.src}`),PU=`url("${fc.src}")`;else if(kk&&Ay&&1===mU.mode&&!Nc&&Eo>2){(0,jK.logInfo)(`Inverting dark image ${fc.src}`);const kk=undefined;PU=`url("${(0,Zy.getFilteredImageDataURL)(fc,Object.assign(Object.assign({},mU),{sepia:(0,NC.clamp)(mU.sepia+10,0,100)}))}")`}else if(xG&&!Ay&&1===mU.mode)if(Nc)(0,jK.logInfo)(`Not modifying light non-transparent large image ${fc.src}`),PU="none";else{(0,jK.logInfo)(`Dimming light image ${fc.src}`);const kk=undefined;PU=`url("${(0,Zy.getFilteredImageDataURL)(fc,mU)}")`}else if(0===mU.mode&&xG&&!Nc){(0,jK.logInfo)(`Applying filter to image ${fc.src}`);const kk=undefined;PU=`url("${(0,Zy.getFilteredImageDataURL)(fc,Object.assign(Object.assign({},mU),{brightness:(0,NC.clamp)(mU.brightness-10,5,200),sepia:(0,NC.clamp)(mU.sepia+10,0,100)}))}")`}else(0,jK.logInfo)(`Not modifying too large image ${fc.src}`),PU=null;return PU},fQ=[];let DM=0,aY=!1;return ZR.forEach((({type:mU,match:kk,index:xG,typeGradient:NC,hasComma:Ay,offset:Nc},sR)=>{const Eo=xG,Zy=DM,jK=Eo+kk.length+Nc;DM=jK,Zy!==Eo&&(aY?fQ.push((()=>{let mU=fc.substring(Zy,Eo);return","===mU[0]&&(mU=mU.substring(1)),mU})):fQ.push((()=>fc.substring(Zy,Eo)))),aY=Ay||!1,"url"===mU?fQ.push(iR(kk)):"gradient"===mU&&fQ.push(wZ({match:kk,index:xG,typeGradient:NC,hasComma:Ay||!1,offset:Nc})),sR===ZR.length-1&&fQ.push((()=>fc.substring(jK)))})),fc=>{const mU=fQ.filter(Boolean).map((mU=>mU(fc)));if(mU.some((fc=>fc instanceof Promise)))return Promise.all(mU).then((fc=>fc.filter(Boolean).join("")));const kk=mU.join("");return kk.endsWith(", initial")?kk.slice(0,-9):kk}}catch(mU){return(0,jK.logWarn)(`Unable to parse gradient ${fc}`,mU),null}}function QP(fc){try{let mU=0;const kk=(0,Ay.getMatches)(/(^|\s)(?!calc)([a-z]+\(.+?\)|#[0-9a-f]+|[a-z]+)(.*?(inset|outset)?($|,))/gi,fc,2);let NC=0;const Nc=kk.map(((Ay,Nc)=>{const Eo=mU,Zy=fc.indexOf(Ay,mU),jK=Zy+Ay.length;mU=jK;const PU=(0,xG.parseColorWithCache)(Ay);return PU?mU=>`${fc.substring(Eo,Zy)}${(0,sR.modifyShadowColor)(PU,mU)}${Nc===kk.length-1?fc.substring(jK):""}`:(NC++,()=>fc.substring(Eo,jK))}));return fc=>{const mU=Nc.map((mU=>mU(fc))).join("");return{matchesLength:kk.length,unparseableMatchesLength:NC,result:mU}}}catch(mU){return(0,jK.logWarn)(`Unable to parse shadow ${fc}`,mU),null}}function We(fc){const mU=QP(fc);return mU?fc=>mU(fc).result:null}function ns(fc,mU,kk,xG,NC,Ay){return fc.getModifierForVariable({varName:mU,sourceValue:kk,rule:xG,ignoredImgSelectors:NC,isCancelled:Ay})}function ZF(fc,mU,kk){return fc.getModifierForVarDependant(mU,kk)}function aD(){(0,sR.clearColorModificationCache)(),Xi.clear(),(0,Zy.cleanImageProcessingCache)(),oq.clear()}kk.getBgImageModifier=Tu,kk.getShadowModifierWithInfo=QP,kk.getShadowModifier=We,kk.cleanModificationCache=aD},{"../../generators/modify-colors":23,"../../utils/color":34,"../../utils/math":37,"../../utils/parsing":40,"../../utils/platform":41,"../../utils/text":42,"../../utils/url":46,"../utils/log":20,"./css-rules":5,"./image":7}],12:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.EVENT_ARG=void 0;const xG=fc("./stylesheet-proxy"),NC=fc("../utils/log"),Ay=fc("../../const");document.currentScript&&document.currentScript.remove();const Nc=`${Ay.MISC_PREFIX}ProxyInjected`,sR=`${Ay.EVENT_PREFIX}stylesheetProxy__done`;kk.EVENT_ARG=`${Ay.EVENT_PREFIX}stylesheetProxy__arg`;const Eo=!document.currentScript;function Zy(fc){(0,xG.injectProxy)(fc),wM(),document.dispatchEvent(new CustomEvent(sR))}function jK(){const fc=document.currentScript.dataset.arg;if(void 0!==fc){document.documentElement.dataset[Nc]="true";const mU=JSON.parse(fc);(0,NC.logInfo)(`MV3 proxy injector: regular path runs injectProxy(${mU}).`),Zy(mU)}}function PU(fc){document.removeEventListener(kk.EVENT_ARG,PU),void 0===document.documentElement.dataset[Nc]?(document.documentElement.dataset[Nc]="true",(0,NC.logInfo)(`MV3 proxy injector: ${Eo?"registerd":"dedicated"} path runs injectProxy(${fc.detail}).`),Zy(fc.detail)):(0,NC.logInfo)(`MV3 proxy injector: ${Eo?"registerd":"dedicated"} path exits because everything is done.`)}function wM(){document.removeEventListener(kk.EVENT_ARG,PU),document.removeEventListener(sR,wM)}function pR(){(0,NC.logInfo)(`MV3 proxy injector: ${Eo?"registerd":"dedicated"} path setup...`),document.addEventListener(kk.EVENT_ARG,PU),document.addEventListener(sR,wM)}function fx(){void 0===document.documentElement.dataset[Nc]?((0,NC.logInfo)("MV3 proxy injector: proxy attempts to inject..."),document.currentScript&&jK(),pR()):(0,NC.logInfo)("MV3 proxy injector: proxy exits because everything is done.")}fx()},{"../../const":2,"../utils/log":20,"./stylesheet-proxy":16}],13:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.bgFetch=void 0;const xG=fc("../../utils/message");let NC=0;const Ay=new Map,Nc=new Map;async function sR(fc){return new Promise(((mU,kk)=>{const sR=++NC;Ay.set(sR,mU),Nc.set(sR,kk),chrome.runtime.sendMessage({type:xG.MessageType.CS_FETCH,data:fc,id:sR})}))}kk.bgFetch=sR,chrome.runtime.onMessage.addListener((({type:fc,data:mU,error:kk,id:NC})=>{if(fc===xG.MessageType.BG_FETCH_RESPONSE){const fc=Ay.get(NC),xG=Nc.get(NC);Ay.delete(NC),Nc.delete(NC),kk?xG&&xG(kk):fc&&fc(mU)}}))},{"../../utils/message":38}],14:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.manageStyle=kk.cleanLoadingLinks=kk.getManageableStyles=kk.shouldManageStyle=kk.STYLE_SELECTOR=void 0;const xG=fc("../../utils/array"),NC=fc("../../utils/text"),Ay=fc("../../utils/url"),Nc=fc("../utils/dom"),sR=fc("../utils/log"),Eo=fc("./css-rules"),Zy=fc("./network"),jK=fc("./stylesheet-modifier"),PU=fc("../../utils/platform"),wM=fc("../../const"),pR=!1;function fx(fc){if(!fc.href)return!1;try{const mU=undefined;return"fonts.googleapis.com"===new URL(fc.href).hostname}catch(mU){return(0,sR.logInfo)(`Couldn't construct ${fc.href} as URL`),!1}}function gW(fc){return(fc instanceof HTMLStyleElement||fc instanceof SVGStyleElement||fc instanceof HTMLLinkElement&&Boolean(fc.rel)&&fc.rel.toLowerCase().includes("stylesheet")&&Boolean(fc.href)&&!fc.disabled&&(!PU.isFirefox||!fc.href.startsWith("moz-extension://"))&&!fx(fc))&&!fc.classList.contains(wM.STYLESHEET_COMMON_CLASSNAME)&&"print"!==fc.media.toLowerCase()&&!fc.classList.contains("stylus")}function ZR(fc,mU=[],NC=!0){return gW(fc)?mU.push(fc):(fc instanceof Element||PU.isShadowDomSupported&&fc instanceof ShadowRoot||fc===document)&&((0,xG.forEach)(fc.querySelectorAll(kk.STYLE_SELECTOR),(fc=>ZR(fc,mU,!1))),NC&&(0,Nc.iterateShadowHosts)(fc,(fc=>ZR(fc.shadowRoot,mU,!1)))),mU}kk.STYLE_SELECTOR='style, link[rel*="stylesheet" i]:not([disabled])',kk.shouldManageStyle=gW,kk.getManageableStyles=ZR;const wZ=new WeakSet,iR=new WeakSet;let Vd=!1;document.addEventListener(`${wM.EVENT_PREFIX}inlineScriptsAllowed`,(()=>{Vd=!0}));let fQ=0;const DM=new Map;function aY(){DM.clear()}function Xi(fc,{update:mU,loadingStart:kk,loadingEnd:xG}){const NC=[];let Zy=fc;for(;(Zy=Zy.nextElementSibling)&&Zy.matches(`.${wM.STYLESHEET_COMMON_CLASSNAME}`);)NC.push(Zy);let fx=NC.find((fc=>fc.matches(wM.STYLESHEET_CORS_SELECTOR)&&!iR.has(fc)))||null,gW=NC.find((fc=>fc.matches(wM.STYLESHEET_SYNC_SELECTOR)&&!wZ.has(fc)))||null,ZR=null,aY=null,Xi=!1,DX=!0;const ns=(0,jK.createStyleSheetModifier)(),ZF=new MutationObserver((()=>{mU()})),aD={attributes:!0,childList:!0,subtree:!0,characterData:!0};function Nq(){return fc instanceof HTMLStyleElement&&fc.textContent.trim().match(Eo.cssImportRegex)}function vn(fc,mU){let kk=!1;if(fc){let xG;fc:for(let NC=0,Ay=fc.length;NC<Ay;NC++)if(xG=fc[NC],xG.href){if(!mU){kk=!0;break fc}if(!xG.href.startsWith("https://fonts.googleapis.com/")&&xG.href.startsWith("http")&&!xG.href.startsWith(location.origin)){kk=!0;break fc}}}return kk}function ua(){if(fx)return(0,sR.logInfo)("[getRulesSync] Using cors-copy."),fx.sheet.cssRules;if(Nq())return(0,sR.logInfo)("[getRulesSync] CSSImport detected."),null;const mU=JX();return fc instanceof HTMLLinkElement&&!(0,Ay.isRelativeHrefOnAbsolutePath)(fc.href)&&vn(mU,!1)?((0,sR.logInfo)("[getRulesSync] CSSImportRule detected on non-local href."),null):vn(mU,!0)?((0,sR.logInfo)("[getRulesSync] Cross-Origin CSSImportRule detected."),null):((0,sR.logInfo)("[getRulesSync] Using cssRules."),!mU&&(0,sR.logWarn)("[getRulesSync] cssRules is null, trying again."),mU)}function lQ(){fx?(fc.nextSibling!==fx&&fc.parentNode.insertBefore(fx,fc.nextSibling),fx.nextSibling!==gW&&fc.parentNode.insertBefore(gW,fx.nextSibling)):fc.nextSibling!==gW&&fc.parentNode.insertBefore(gW,fc.nextSibling)}function eS(){gW=fc instanceof SVGStyleElement?document.createElementNS("http://www.w3.org/2000/svg","style"):document.createElement("style"),gW.classList.add(wM.STYLESHEET_COMMON_CLASSNAME),gW.classList.add(wM.STYLESHEET_SYNC_SELECTOR.substring(1)),gW.media="screen",fc.title&&(gW.title=fc.title),wZ.add(gW)}let vy=!1,CL=!1;const mE=++fQ;async function vG(){let mU,kk;if(fc instanceof HTMLLinkElement){let[xG,NC]=ud();if(NC&&(0,sR.logWarn)(NC),!xG&&!NC&&!PU.isSafari||PU.isSafari&&!fc.sheet||eW(NC)){try{(0,sR.logInfo)(`Linkelement ${mE} is not loaded yet and thus will be await for`,fc),await oq(fc,mE)}catch(fc){(0,sR.logWarn)(fc),CL=!0}if(Xi)return null;[xG,NC]=ud(),NC&&(0,sR.logWarn)(NC)}if(xG&&!vn(xG,!1))return xG;if(mU=await Tu(fc.href),kk=(0,Eo.getCSSBaseBath)(fc.href),Xi)return null}else{if(!Nq())return null;mU=fc.textContent.trim(),kk=(0,Eo.getCSSBaseBath)(location.href)}if(mU){try{const xG=await QP(mU,kk);fx=We(fc,xG)}catch(fc){(0,sR.logWarn)(fc)}if(fx)return ZR=(0,Nc.watchForNodePosition)(fx,"prev-sibling"),fx.sheet.cssRules}return null}function kv(fc){const NC=ua();return NC?{rules:NC}:fc.secondRound?((0,sR.logWarn)("Detected dead-lock at details(), returning early to prevent it."),null):(vy||CL||(vy=!0,kk(),vG().then((fc=>{vy=!1,xG(),fc&&mU()})).catch((fc=>{(0,sR.logWarn)(fc),vy=!1,xG()}))),null)}let IV=!1;function dk(fc,kk){const xG=ua();function NC(fc){if(fc)for(let mU=fc.cssRules.length-1;mU>=0;mU--)fc.deleteRule(mU)}function Ay(){gW||eS(),aY&&aY.stop(),lQ(),null==gW.sheet&&(gW.textContent="");const fc=undefined;return NC(gW.sheet),aY?aY.run():aY=(0,Nc.watchForNodePosition)(gW,"prev-sibling",(()=>{IV=!0,sR()})),gW.sheet}function sR(){const NC=IV;IV=!1,ns.modifySheet({prepareSheet:Ay,sourceCSSRules:xG,theme:fc,ignoreImageAnalysis:kk,force:NC,isAsyncCancelled:()=>Xi}),DX=0===gW.sheet.cssRules.length,ns.shouldRebuildStyle()&&(0,Nc.addReadyStateCompleteListener)((()=>mU()))}xG&&(Xi=!1,sR())}function ud(){try{return null==fc.sheet?[null,null]:[fc.sheet.cssRules,null]}catch(fc){return[null,fc]}}function eW(fc){return fc&&fc.message&&fc.message.includes("loading")}function JX(){const[fc,mU]=ud();return mU?((0,sR.logWarn)(mU),null):fc}function MR(){qB(),pR||Vd&&fc.sheet||jy()}let bs=null,ww=null;function St(){const fc=JX();return fc?fc.length:null}function Rj(){return St()!==bs}function jy(){bs=St(),hp();const kk=()=>{Rj()&&(bs=St(),mU()),Vd&&fc.sheet?hp():ww=requestAnimationFrame(kk)};kk()}function hp(){cancelAnimationFrame(ww)}let ee=!1;function Cd(){function fc(){ee=!1,Xi||mU()}Vd=!0,hp(),ee||(ee=!0,"function"==typeof queueMicrotask?queueMicrotask(fc):requestAnimationFrame(fc))}function qB(){fc.addEventListener(`${wM.EVENT_PREFIX}updateSheet`,Cd)}function zj(){fc.removeEventListener(`${wM.EVENT_PREFIX}updateSheet`,Cd)}function bx(){zj(),hp()}function di(){ZF.disconnect(),Xi=!0,ZR&&ZR.stop(),aY&&aY.stop(),bx()}function fR(){if(di(),(0,Nc.removeNode)(fx),(0,Nc.removeNode)(gW),xG(),DM.has(mE)){const fc=DM.get(mE);DM.delete(mE),fc&&fc()}}function Hj(){ZF.observe(fc,aD),fc instanceof HTMLStyleElement&&MR()}const mV=10;let zm=0;function Iu(){gW&&(zm++,zm>mV?(0,sR.logWarn)("Style sheet was moved multiple times",fc):((0,sR.logWarn)("Restore style",gW,fc),lQ(),ZR&&ZR.skip(),aY&&aY.skip(),DX||(IV=!0,mU())))}return{details:kv,render:dk,pause:di,destroy:fR,watch:Hj,restore:Iu}}async function oq(fc,mU){return new Promise(((kk,xG)=>{const NC=()=>{fc.removeEventListener("load",Ay),fc.removeEventListener("error",Nc),DM.delete(mU)},Ay=()=>{NC(),(0,sR.logInfo)(`Linkelement ${mU} has been loaded`),kk()},Nc=()=>{NC(),xG(`Linkelement ${mU} couldn't be loaded. ${fc.href}`)};DM.set(mU,(()=>{NC(),xG()})),fc.addEventListener("load",Ay),fc.addEventListener("error",Nc),fc.href||Nc()}))}function DX(fc){return(0,Eo.getCSSURLValue)(fc.substring(7).trim().replace(/;$/,"").replace(/screen$/,""))}async function Tu(fc){return fc.startsWith("data:")?await(await fetch(fc)).text():await(0,Zy.bgFetch)({url:fc,responseType:"text",mimeType:"text/css",origin:window.location.origin})}async function QP(fc,mU,kk=new Map){fc=(0,Eo.removeCSSComments)(fc),fc=(0,Eo.replaceCSSFontFace)(fc),fc=(0,Eo.replaceCSSRelativeURLsWithAbsolute)(fc,mU);const xG=(0,NC.getMatches)(Eo.cssImportRegex,fc);for(const NC of xG){const xG=DX(NC),Nc=(0,Ay.getAbsoluteURL)(mU,xG);let Zy;if(kk.has(Nc))Zy=kk.get(Nc);else try{Zy=await Tu(Nc),kk.set(Nc,Zy),Zy=await QP(Zy,(0,Eo.getCSSBaseBath)(Nc),kk)}catch(fc){(0,sR.logWarn)(fc),Zy=""}fc=fc.split(NC).join(Zy)}return fc=fc.trim()}function We(fc,mU){if(!mU)return null;const kk=document.createElement("style");return kk.classList.add(wM.STYLESHEET_COMMON_CLASSNAME),kk.classList.add(wM.STYLESHEET_CORS_SELECTOR.substring(1)),kk.media="screen",kk.textContent=mU,fc.parentNode.insertBefore(kk,fc.nextSibling),kk.sheet.disabled=!0,iR.add(kk),kk}kk.cleanLoadingLinks=aY,kk.manageStyle=Xi},{"../../const":2,"../../utils/array":31,"../../utils/platform":41,"../../utils/text":42,"../../utils/url":46,"../utils/dom":19,"../utils/log":20,"./css-rules":5,"./network":13,"./stylesheet-modifier":15}],15:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.createStyleSheetModifier=void 0;const xG=fc("../../utils/throttle"),NC=fc("./css-rules"),Ay=fc("./modify-css"),Nc=fc("./variables"),sR=["mode","brightness","contrast","grayscale","sepia","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor"];function Eo(fc){let mU="";return sR.forEach((kk=>{mU+=`${kk}:${fc[kk]};`})),mU}const Zy=(0,xG.createAsyncTasksQueue)();function jK(){let fc=0;const mU=new Set,kk=new Map,xG=new Set;let sR=null,jK=!1,PU=!1;function wM(){return jK&&!PU}function pR(wM){const pR=wM.sourceCSSRules,{theme:fx,ignoreImageAnalysis:gW,force:ZR,prepareSheet:wZ,isAsyncCancelled:iR}=wM;let Vd=0===kk.size;const fQ=new Set(kk.keys()),DM=Eo(fx),aY=DM!==sR;jK&&(PU=!0);const Xi=[];if((0,NC.iterateCSSRules)(pR,(fc=>{let xG=fc.cssText,sR=!1;if(fQ.delete(xG),fc.parentRule instanceof CSSMediaRule&&(xG+=`;${fc.parentRule.media.mediaText}`),mU.has(xG)||(mU.add(xG),sR=!0),!sR)return void Xi.push(kk.get(xG));if(Vd=!0,"revert"===fc.style.all)return;const Eo=[];fc.style&&(0,NC.iterateCSSDeclarations)(fc.style,((mU,kk)=>{const xG=(0,Ay.getModifiableCSSDeclaration)(mU,kk,fc,Nc.variablesStore,gW,iR);xG&&Eo.push(xG)}));let Zy=null;if(Eo.length>0){const mU=fc.parentRule;Zy={selector:fc.selectorText,declarations:Eo,parentRule:mU},Xi.push(Zy)}kk.set(xG,Zy)}),(()=>{jK=!0})),fQ.forEach((fc=>{mU.delete(fc),kk.delete(fc)})),sR=DM,!ZR&&!Vd&&!aY)return;function oq(fc,mU,kk){const{selector:xG,declarations:NC}=kk,Ay=fc=>{const{property:mU,value:kk,important:xG,sourceValue:NC}=fc;return`${mU}: ${null==kk?NC:kk}${xG?" !important":""};`};let Nc="";NC.forEach((fc=>{Nc+=`${Ay(fc)} `}));const sR=`${xG} { ${Nc} }`;fc.insertRule(sR,mU)}fc++;const DX=new Map,Tu=new Map;let QP=0,We=0;const ns={rule:null,rules:[],isGroup:!0},ZF=new WeakMap;function aD(fc){if(null==fc)return ns;if(ZF.has(fc))return ZF.get(fc);const mU={rule:fc,rules:[],isGroup:!0};ZF.set(fc,mU);const kk=undefined;return aD(fc.parentRule).rules.push(mU),mU}xG.forEach((fc=>fc())),xG.clear(),Xi.filter((fc=>fc)).forEach((({selector:mU,declarations:kk,parentRule:NC})=>{const Ay=aD(NC),Nc={selector:mU,declarations:[],isGroup:!1},sR=Nc.declarations;function Eo(mU,kk,xG,NC){const Ay=++QP,Nc={property:mU,value:null,important:xG,asyncKey:Ay,sourceValue:NC};sR.push(Nc);const Eo=fc;kk.then((mU=>{mU&&!iR()&&Eo===fc&&(Nc.value=mU,Zy.add((()=>{iR()||Eo!==fc||ua(Ay)})))}))}function jK(mU,kk,NC,Ay){const{declarations:Nc,onTypeChange:Zy}=kk,jK=++We,PU=fc,wM=sR.length;let pR=[];if(0===Nc.length){const fc={property:mU,value:Ay,important:NC,sourceValue:Ay,varKey:jK};sR.push(fc),pR=[fc]}Nc.forEach((fc=>{if(fc.value instanceof Promise)Eo(fc.property,fc.value,NC,Ay);else{const mU={property:fc.property,value:fc.value,important:NC,sourceValue:Ay,varKey:jK};sR.push(mU),pR.push(mU)}})),Zy.addListener((mU=>{if(iR()||PU!==fc)return;const kk=mU.map((fc=>({property:fc.property,value:fc.value,important:NC,sourceValue:Ay,varKey:jK}))),xG=sR.indexOf(pR[0],wM);sR.splice(xG,pR.length,...kk),pR=kk,lQ(jK)})),xG.add((()=>Zy.removeListeners()))}Ay.rules.push(Nc),kk.forEach((({property:fc,value:mU,important:kk,sourceValue:xG})=>{if("function"==typeof mU){const NC=mU(fx);NC instanceof Promise?Eo(fc,NC,kk,xG):fc.startsWith("--")?jK(fc,NC,kk,xG):sR.push({property:fc,value:NC,important:kk,sourceValue:xG})}else sR.push({property:fc,value:mU,important:kk,sourceValue:xG})}))}));const Nq=wZ();function vn(){function fc(fc,mU){const{rule:kk}=fc;if(kk instanceof CSSMediaRule){const{media:fc}=kk,xG=mU.cssRules.length;return mU.insertRule(`@media ${fc.mediaText} {}`,xG),mU.cssRules[xG]}return mU}function mU(kk,xG,NC){kk.rules.forEach((kk=>{if(kk.isGroup){const Ay=undefined;mU(kk,fc(kk,xG),NC)}else NC(kk,xG)}))}mU(ns,Nq,((fc,mU)=>{const kk=mU.cssRules.length;fc.declarations.forEach((({asyncKey:xG,varKey:NC})=>{null!=xG&&DX.set(xG,{rule:fc,target:mU,index:kk}),null!=NC&&Tu.set(NC,{rule:fc,target:mU,index:kk})})),oq(mU,kk,fc)}))}function ua(fc){const{rule:mU,target:kk,index:xG}=DX.get(fc);kk.deleteRule(xG),oq(kk,xG,mU),DX.delete(fc)}function lQ(fc){const{rule:mU,target:kk,index:xG}=Tu.get(fc);kk.deleteRule(xG),oq(kk,xG,mU)}vn()}return{modifySheet:pR,shouldRebuildStyle:wM}}kk.createStyleSheetModifier=jK},{"../../utils/throttle":43,"./css-rules":5,"./modify-css":11,"./variables":17}],16:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.injectProxy=void 0;const xG=fc("../../const");function NC(fc){document.dispatchEvent(new CustomEvent(`${xG.EVENT_PREFIX}inlineScriptsAllowed`));const mU=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"addRule"),kk=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"insertRule"),NC=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"deleteRule"),Ay=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"removeRule"),Nc=fc?Object.getOwnPropertyDescriptor(Document.prototype,"styleSheets"):null,sR=["baidu.com","baike.baidu.com","ditu.baidu.com","map.baidu.com","maps.baidu.com","haokan.baidu.com","pan.baidu.com","passport.baidu.com","tieba.baidu.com","www.baidu.com"].includes(location.hostname),Eo=sR?Object.getOwnPropertyDescriptor(Element.prototype,"getElementsByTagName"):null,Zy="www.vy.no"===location.hostname,jK=Zy?Object.getOwnPropertyDescriptor(Node.prototype,"childNodes"):null,PU=()=>{Object.defineProperty(CSSStyleSheet.prototype,"addRule",mU),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",kk),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",NC),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",Ay),document.removeEventListener(`${xG.EVENT_PREFIX}cleanUp`,PU),document.removeEventListener(`${xG.EVENT_PREFIX}addUndefinedResolver`,wM),fc&&Object.defineProperty(Document.prototype,"styleSheets",Nc),sR&&Object.defineProperty(Element.prototype,"getElementsByTagName",Eo),Zy&&Object.defineProperty(Node.prototype,"childNodes",jK)},wM=fc=>{customElements.whenDefined(fc.detail.tag).then((()=>{document.dispatchEvent(new CustomEvent(`${xG.EVENT_PREFIX}isDefined`,{detail:{tag:fc.detail.tag}}))}))};document.addEventListener(xG.MSG_CLEANUP,PU),document.addEventListener(`${xG.EVENT_PREFIX}addUndefinedResolver`,wM);const pR=new Event(`${xG.EVENT_PREFIX}updateSheet`);function fx(fc,kk,NC){return mU.value.call(this,fc,kk,NC),this.ownerNode&&!this.ownerNode.classList.contains(xG.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(pR),-1}function gW(fc,mU){const NC=kk.value.call(this,fc,mU);return this.ownerNode&&!this.ownerNode.classList.contains(xG.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(pR),NC}function ZR(fc){NC.value.call(this,fc),this.ownerNode&&!this.ownerNode.classList.contains(xG.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(pR)}function wZ(fc){Ay.value.call(this,fc),this.ownerNode&&!this.ownerNode.classList.contains(xG.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(pR)}function iR(){const fc=()=>{const fc=undefined,mU=[...Nc.get.call(this)].filter((fc=>fc.ownerNode&&!fc.ownerNode.classList.contains(xG.STYLESHEET_COMMON_CLASSNAME)));return mU.item=fc=>mU[fc],Object.setPrototypeOf(mU,StyleSheetList.prototype)};let mU=fc();const kk=undefined;return mU=new Proxy(mU,{get:function(mU,kk){return fc()[kk]}}),mU}function Vd(fc){if("style"!==fc)return Eo.value.call(this,fc);const mU=()=>{const mU=Eo.value.call(this,fc);return Object.setPrototypeOf([...mU].filter((fc=>!fc.classList.contains(xG.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)};let kk=mU();const NC=undefined;return kk=new Proxy(kk,{get:function(fc,kk){return mU()[Number(kk)||kk]}}),kk}function fQ(){const fc=jK.get.call(this);return Object.setPrototypeOf([...fc].filter((fc=>!fc.classList||!fc.classList.contains(xG.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)}Object.defineProperty(CSSStyleSheet.prototype,"addRule",Object.assign({},mU,{value:fx})),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",Object.assign({},kk,{value:gW})),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",Object.assign({},NC,{value:ZR})),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",Object.assign({},Ay,{value:wZ})),fc&&Object.defineProperty(Document.prototype,"styleSheets",Object.assign({},Nc,{get:iR})),sR&&Object.defineProperty(Element.prototype,"getElementsByTagName",Object.assign({},Eo,{value:Vd})),Zy&&Object.defineProperty(Node.prototype,"childNodes",Object.assign({},jK,{get:fQ}))}kk.injectProxy=NC},{"../../const":2}],17:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.replaceCSSVariablesNames=kk.variablesStore=kk.VariablesStore=void 0;const xG=fc("../../generators/modify-colors"),NC=fc("../../utils/text"),Ay=fc("./css-rules"),Nc=fc("./modify-css"),sR=fc("../../utils/color"),Eo=fc("../../const"),Zy=1<<0,jK=1<<1,PU=1<<2,wM=1<<3;class pR{constructor(){this.varTypes=new Map,this.rulesQueue=[],this.definedVars=new Set,this.varRefs=new Map,this.unknownColorVars=new Set,this.unknownBgVars=new Set,this.undefinedVars=new Set,this.initialVarTypes=new Map,this.changedTypeVars=new Set,this.typeChangeSubscriptions=new Map,this.unstableVarValues=new Map}clear(){this.varTypes.clear(),this.rulesQueue.splice(0),this.definedVars.clear(),this.varRefs.clear(),this.unknownColorVars.clear(),this.unknownBgVars.clear(),this.undefinedVars.clear(),this.initialVarTypes.clear(),this.changedTypeVars.clear(),this.typeChangeSubscriptions.clear(),this.unstableVarValues.clear()}isVarType(fc,mU){return this.varTypes.has(fc)&&(this.varTypes.get(fc)&mU)>0}addRulesForMatching(fc){this.rulesQueue.push(fc)}matchVariablesAndDependants(){this.changedTypeVars.clear(),this.initialVarTypes=new Map(this.varTypes),this.collectRootVariables(),this.collectVariablesAndVarDep(this.rulesQueue),this.rulesQueue.splice(0),this.collectRootVarDependants(),this.varRefs.forEach(((fc,mU)=>{fc.forEach((fc=>{this.varTypes.has(mU)&&this.resolveVariableType(fc,this.varTypes.get(mU))}))})),this.unknownColorVars.forEach((fc=>{this.unknownBgVars.has(fc)?(this.unknownColorVars.delete(fc),this.unknownBgVars.delete(fc),this.resolveVariableType(fc,Zy)):this.isVarType(fc,Zy|jK|PU)?this.unknownColorVars.delete(fc):this.undefinedVars.add(fc)})),this.unknownBgVars.forEach((fc=>{const mU=undefined;null!=this.findVarRef(fc,(fc=>this.unknownColorVars.has(fc)||this.isVarType(fc,jK|PU)))?this.itarateVarRefs(fc,(fc=>{this.resolveVariableType(fc,Zy)})):this.isVarType(fc,Zy|wM)?this.unknownBgVars.delete(fc):this.undefinedVars.add(fc)})),this.changedTypeVars.forEach((fc=>{this.typeChangeSubscriptions.has(fc)&&this.typeChangeSubscriptions.get(fc).forEach((fc=>{fc()}))})),this.changedTypeVars.clear()}getModifierForVariable(fc){return mU=>{const{varName:kk,sourceValue:xG,rule:NC,ignoredImgSelectors:Ay,isCancelled:sR}=fc,Eo=()=>{const fc=[],Eo=(NC,Ay,Nc)=>{if(!this.isVarType(kk,NC))return;const sR=Ay(kk);let Eo;if(DX(xG))if(Tu(xG)){let fc=ua(xG,this.unstableVarValues);fc||(fc=NC===Zy?"#ffffff":"#000000"),Eo=Nc(fc,mU)}else Eo=iR(xG,(fc=>Ay(fc)),(fc=>Nc(fc,mU)));else Eo=Nc(xG,mU);fc.push({property:sR,value:Eo})};if(Eo(Zy,fQ,aD),Eo(jK,DM,Nq),Eo(PU,aY,vn),this.isVarType(kk,wM)){const Eo=Xi(kk);let Zy=xG;DX(xG)&&(Zy=iR(xG,(fc=>fQ(fc)),(fc=>aD(fc,mU))));const jK=(0,Nc.getBgImageModifier)(Zy,NC,Ay,sR);Zy="function"==typeof jK?jK(mU):jK,fc.push({property:Eo,value:Zy})}return fc},pR=new Set,fx=fc=>{const mU=()=>{const mU=Eo();fc(mU)};pR.add(mU),this.subscribeForVarTypeChange(kk,mU)},gW=()=>{pR.forEach((fc=>{this.unsubscribeFromVariableTypeChanges(kk,fc)}))};return{declarations:Eo(),onTypeChange:{addListener:fx,removeListeners:gW}}}}getModifierForVarDependant(fc,mU){if(mU.match(/^\s*(rgb|hsl)a?\(/)){const kk=fc.startsWith("background"),xG=QP(fc);return fc=>{let NC=ua(mU,this.unstableVarValues);NC||(NC=kk?"#ffffff":"#000000");const Ay=undefined;return(kk?aD:xG?Nq:vn)(NC,fc)}}return"background-color"===fc?fc=>iR(mU,(fc=>fQ(fc)),(mU=>aD(mU,fc))):QP(fc)?fc=>iR(mU,(fc=>DM(fc)),(mU=>Nq(mU,fc))):"background"===fc||"background-image"===fc||"box-shadow"===fc?kk=>{const xG=new Set,NC=()=>{const NC=iR(mU,(fc=>this.isVarType(fc,Zy)?fQ(fc):this.isVarType(fc,wM)?Xi(fc):(xG.add(fc),fc)),(fc=>aD(fc,kk)));if("box-shadow"===fc){const fc=undefined,mU=(0,Nc.getShadowModifierWithInfo)(NC)(kk);if(mU.unparseableMatchesLength!==mU.matchesLength)return mU.result}return NC},Ay=NC();return xG.size>0?new Promise((fc=>{const mU=xG.values().next().value,kk=()=>{this.unsubscribeFromVariableTypeChanges(mU,kk);const xG=NC();fc(xG)};this.subscribeForVarTypeChange(mU,kk)})):Ay}:fc.startsWith("border")||fc.startsWith("outline")?fc=>iR(mU,(fc=>aY(fc)),(mU=>vn(mU,fc))):null}subscribeForVarTypeChange(fc,mU){this.typeChangeSubscriptions.has(fc)||this.typeChangeSubscriptions.set(fc,new Set);const kk=this.typeChangeSubscriptions.get(fc);kk.has(mU)||kk.add(mU)}unsubscribeFromVariableTypeChanges(fc,mU){this.typeChangeSubscriptions.has(fc)&&this.typeChangeSubscriptions.get(fc).delete(mU)}collectVariablesAndVarDep(fc){fc.forEach((fc=>{(0,Ay.iterateCSSRules)(fc,(fc=>{fc.style&&(0,Ay.iterateCSSDeclarations)(fc.style,((fc,mU)=>{oq(fc)&&this.inspectVariable(fc,mU),DX(mU)&&this.inspectVarDependant(fc,mU)}))}))}))}collectRootVariables(){(0,Ay.iterateCSSDeclarations)(document.documentElement.style,((fc,mU)=>{oq(fc)&&this.inspectVariable(fc,mU)}))}inspectVariable(fc,mU){if(this.unstableVarValues.set(fc,mU),DX(mU)&&Tu(mU)&&(this.unknownColorVars.add(fc),this.definedVars.add(fc)),this.definedVars.has(fc))return;this.definedVars.add(fc);const kk=undefined;We.test(mU)||(0,sR.parseColorWithCache)(mU)?this.unknownColorVars.add(fc):(mU.includes("url(")||mU.includes("linear-gradient(")||mU.includes("radial-gradient("))&&this.resolveVariableType(fc,wM)}resolveVariableType(fc,mU){const kk=this.initialVarTypes.get(fc)||0,xG=undefined,NC=(this.varTypes.get(fc)||0)|mU;this.varTypes.set(fc,NC),(NC!==kk||this.undefinedVars.has(fc))&&(this.changedTypeVars.add(fc),this.undefinedVars.delete(fc)),this.unknownColorVars.delete(fc),this.unknownBgVars.delete(fc)}collectRootVarDependants(){(0,Ay.iterateCSSDeclarations)(document.documentElement.style,((fc,mU)=>{DX(mU)&&this.inspectVarDependant(fc,mU)}))}inspectVarDependant(fc,mU){oq(fc)?this.iterateVarDeps(mU,(mU=>{this.varRefs.has(fc)||this.varRefs.set(fc,new Set),this.varRefs.get(fc).add(mU)})):"background-color"===fc||"box-shadow"===fc?this.iterateVarDeps(mU,(fc=>this.resolveVariableType(fc,Zy))):QP(fc)?this.iterateVarDeps(mU,(fc=>this.resolveVariableType(fc,jK))):fc.startsWith("border")||fc.startsWith("outline")?this.iterateVarDeps(mU,(fc=>this.resolveVariableType(fc,PU))):"background"!==fc&&"background-image"!==fc||this.iterateVarDeps(mU,(fc=>{if(this.isVarType(fc,Zy|wM))return;const mU=null!=this.findVarRef(fc,(fc=>this.unknownColorVars.has(fc)||this.isVarType(fc,jK|PU)));this.itarateVarRefs(fc,(fc=>{mU?this.resolveVariableType(fc,Zy):this.unknownBgVars.add(fc)}))}))}iterateVarDeps(fc,mU){const kk=new Set;Vd(fc,(fc=>kk.add(fc))),kk.forEach((fc=>mU(fc)))}findVarRef(fc,mU,kk=new Set){if(kk.has(fc))return null;kk.add(fc);const xG=undefined;if(mU(fc))return fc;const NC=this.varRefs.get(fc);if(!NC||0===NC.size)return null;for(const fc of NC){const xG=this.findVarRef(fc,mU,kk);if(xG)return xG}return null}itarateVarRefs(fc,mU){this.findVarRef(fc,(fc=>(mU(fc),!1)))}setOnRootVariableChange(fc){this.onRootVariableDefined=fc}putRootVars(fc,mU){const kk=fc.sheet;kk.cssRules.length>0&&kk.deleteRule(0);const xG=new Map;(0,Ay.iterateCSSDeclarations)(document.documentElement.style,((fc,kk)=>{oq(fc)&&(this.isVarType(fc,Zy)&&xG.set(fQ(fc),aD(kk,mU)),this.isVarType(fc,jK)&&xG.set(DM(fc),Nq(kk,mU)),this.isVarType(fc,PU)&&xG.set(aY(fc),vn(kk,mU)),this.subscribeForVarTypeChange(fc,this.onRootVariableDefined))}));const NC=[];NC.push(":root {");for(const[fc,mU]of xG)NC.push(`    ${fc}: ${mU};`);NC.push("}");const Nc=NC.join("\n");kk.insertRule(Nc)}}function fx(fc,mU=0){const kk=fc.indexOf("var(",mU);if(kk>=0){const mU=(0,NC.getParenthesesRange)(fc,kk+3);if(mU)return{start:kk,end:mU.end}}return null}function gW(fc){const mU=[];let kk=0,xG;for(;xG=fx(fc,kk);){const{start:NC,end:Ay}=xG;mU.push({start:NC,end:Ay,value:fc.substring(NC,Ay)}),kk=xG.end+1}return mU}function ZR(fc,mU){const kk=gW(fc),xG=kk.length;if(0===xG)return fc;const NC=fc.length,Ay=kk.map((fc=>mU(fc.value))),Nc=[];Nc.push(fc.substring(0,kk[0].start));for(let mU=0;mU<xG;mU++){Nc.push(Ay[mU]);const sR=kk[mU].end,Eo=mU<xG-1?kk[mU+1].start:NC;Nc.push(fc.substring(sR,Eo))}return Nc.join("")}function wZ(fc){const mU=fc.indexOf(",");let kk,xG;return mU>=0?(kk=fc.substring(4,mU).trim(),xG=fc.substring(mU+1,fc.length-1).trim()):(kk=fc.substring(4,fc.length-1).trim(),xG=""),{name:kk,fallback:xG}}function iR(fc,mU,kk){const xG=undefined;return ZR(fc,(fc=>{const{name:xG,fallback:NC}=wZ(fc),Ay=mU(xG);if(!NC)return`var(${Ay})`;let Nc;return Nc=DX(NC)?iR(NC,mU,kk):kk?kk(NC):NC,`var(${Ay}, ${Nc})`}))}function Vd(fc,mU){iR(fc,(fc=>(mU(fc),fc)))}function fQ(fc){return`--${Eo.ROOT_VARS_PREFIX}-bg${fc}`}function DM(fc){return`--${Eo.ROOT_VARS_PREFIX}-text${fc}`}function aY(fc){return`--${Eo.ROOT_VARS_PREFIX}-border${fc}`}function Xi(fc){return`--${Eo.ROOT_VARS_PREFIX}-bgimg${fc}`}function oq(fc){return fc.startsWith("--")}function DX(fc){return fc.includes("var(")}function Tu(fc){return fc.match(/^\s*(rgb|hsl)a?\(/)}function QP(fc){return"color"===fc||"caret-color"===fc||"-webkit-text-fill-color"===fc}kk.VariablesStore=pR,kk.variablesStore=new pR,kk.replaceCSSVariablesNames=iR;const We=/^\d{1,3}, ?\d{1,3}, ?\d{1,3}$/;function ns(fc){if(We.test(fc)){const mU=fc.split(",");let kk="rgb(";return mU.forEach((fc=>{kk+=`${fc.trim()}, `})),kk=kk.substring(0,kk.length-2),kk+=")",{isRaw:!0,color:kk}}return{isRaw:!1,color:fc}}function ZF(fc,mU,kk){const{isRaw:xG,color:NC}=ns(fc),Ay=(0,sR.parseColorWithCache)(NC);if(Ay){const fc=kk(Ay,mU);if(xG){const mU=(0,sR.parseColorWithCache)(fc);return mU?`${mU.r}, ${mU.g}, ${mU.b}`:fc}return fc}return NC}function aD(fc,mU){return ZF(fc,mU,xG.modifyBackgroundColor)}function Nq(fc,mU){return ZF(fc,mU,xG.modifyForegroundColor)}function vn(fc,mU){return ZF(fc,mU,xG.modifyBorderColor)}function ua(fc,mU,kk=new Set){let xG=!1;const NC=undefined,Ay=ZR(fc,(fc=>{const{name:NC,fallback:Ay}=wZ(fc);if(kk.has(NC))return xG=!0,null;kk.add(NC);const Nc=mU.get(NC)||Ay;let sR=null;return Nc&&(sR=DX(Nc)?ua(Nc,mU,kk):Nc),sR||(xG=!0,null)}));return xG?null:Ay}},{"../../const":2,"../../generators/modify-colors":23,"../../utils/color":34,"../../utils/text":42,"./css-rules":5,"./modify-css":11}],18:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.stopWatchingForStyleChanges=kk.watchForStyleChanges=void 0;const xG=fc("../../utils/array"),NC=fc("../utils/dom"),Ay=fc("./style-manager"),Nc=fc("../../utils/platform"),sR=fc("../../const"),Eo=[];let Zy;const jK=new Map;let PU;function wM(fc){Nc.isDefinedSelectorSupported&&(0,xG.forEach)(fc.querySelectorAll(":not(:defined)"),(fc=>{let mU=fc.tagName.toLowerCase();if(!mU.includes("-")){const kk=fc.getAttribute("is");if(!kk)return;mU=kk}jK.has(mU)||(jK.set(mU,new Set),ZR(mU).then((()=>{if(PU){const fc=jK.get(mU);jK.delete(mU),PU(Array.from(fc))}}))),jK.get(mU).add(fc)}))}let pR=!1;document.addEventListener(`${sR.EVENT_PREFIX}inlineScriptsAllowed`,(()=>{pR=!0}));const fx=new Map;function gW(fc){if(pR=!0,fx.has(fc.detail.tag)){const mU=undefined;fx.get(fc.detail.tag)()}}async function ZR(fc){return new Promise((mU=>{if(window.customElements&&"function"==typeof customElements.whenDefined)customElements.whenDefined(fc).then((()=>mU()));else{const kk=()=>{const xG=jK.get(fc);xG&&xG.size>0&&(xG.values().next().value.matches(":defined")?mU():requestAnimationFrame(kk))};requestAnimationFrame(kk)}}))}function wZ(fc){PU=fc}function iR(){PU=null,jK.clear(),document.removeEventListener(`${sR.EVENT_PREFIX}isDefined`,gW)}function Vd(fc,mU,kk){DM();const Nc=new Set(fc),jK=new WeakMap,PU=new WeakMap;function pR(fc){jK.set(fc,fc.previousElementSibling),PU.set(fc,fc.nextElementSibling)}function fx(fc){jK.delete(fc),PU.delete(fc)}function ZR(fc){return fc.previousElementSibling!==jK.get(fc)||fc.nextElementSibling!==PU.get(fc)}function iR(fc){const{createdStyles:kk,removedStyles:xG,movedStyles:NC}=fc;kk.forEach((fc=>pR(fc))),NC.forEach((fc=>pR(fc))),xG.forEach((fc=>fx(fc))),kk.forEach((fc=>Nc.add(fc))),xG.forEach((fc=>Nc.delete(fc))),kk.size+xG.size+NC.size>0&&mU({created:Array.from(kk),removed:Array.from(xG),moved:Array.from(NC),updated:[]})}function Vd({additions:fc,moves:mU,deletions:kk}){const xG=new Set,Nc=new Set,sR=new Set;fc.forEach((fc=>(0,Ay.getManageableStyles)(fc).forEach((fc=>xG.add(fc))))),kk.forEach((fc=>(0,Ay.getManageableStyles)(fc).forEach((fc=>Nc.add(fc))))),mU.forEach((fc=>(0,Ay.getManageableStyles)(fc).forEach((fc=>sR.add(fc))))),iR({createdStyles:xG,removedStyles:Nc,movedStyles:sR}),fc.forEach((fc=>{(0,NC.iterateShadowHosts)(fc,oq),wM(fc)}))}function fQ(fc){const mU=new Set((0,Ay.getManageableStyles)(fc)),kk=new Set,xG=new Set,sR=new Set;mU.forEach((fc=>{Nc.has(fc)||kk.add(fc)})),Nc.forEach((fc=>{mU.has(fc)||xG.add(fc)})),mU.forEach((fc=>{kk.has(fc)||xG.has(fc)||!ZR(fc)||sR.add(fc)})),iR({createdStyles:kk,removedStyles:xG,movedStyles:sR}),(0,NC.iterateShadowHosts)(fc,oq),wM(fc)}function aY(fc){const kk=new Set,xG=new Set;fc.forEach((fc=>{const{target:mU}=fc;mU.isConnected&&((0,Ay.shouldManageStyle)(mU)?kk.add(mU):mU instanceof HTMLLinkElement&&mU.disabled&&xG.add(mU))})),kk.size+xG.size>0&&mU({updated:Array.from(kk),created:[],removed:Array.from(xG),moved:[]})}function Xi(fc){const mU=(0,NC.createOptimizedTreeObserver)(fc,{onMinorMutations:Vd,onHugeMutations:fQ}),kk=new MutationObserver(aY);kk.observe(fc,{attributes:!0,attributeFilter:["rel","disabled","media","href"],subtree:!0}),Eo.push(mU,kk),Zy.add(fc)}function oq(fc){const{shadowRoot:mU}=fc;null==mU||Zy.has(mU)||(Xi(mU),kk(mU))}fc.forEach(pR),Xi(document),(0,NC.iterateShadowHosts)(document.documentElement,oq),wZ((fc=>{const kk=[];fc.forEach((fc=>(0,xG.push)(kk,(0,Ay.getManageableStyles)(fc.shadowRoot)))),mU({created:kk,updated:[],removed:[],moved:[]}),fc.forEach((fc=>{const{shadowRoot:mU}=fc;null!=mU&&(oq(fc),(0,NC.iterateShadowHosts)(mU,oq),wM(mU))}))})),document.addEventListener(`${sR.EVENT_PREFIX}isDefined`,gW),wM(document)}function fQ(){Eo.forEach((fc=>fc.disconnect())),Eo.splice(0,Eo.length),Zy=new WeakSet}function DM(){fQ(),iR()}kk.watchForStyleChanges=Vd,kk.stopWatchingForStyleChanges=DM},{"../../const":2,"../../utils/array":31,"../../utils/platform":41,"../utils/dom":19,"./style-manager":14}],19:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.createOptimizedTreeObserver=kk.cleanReadyStateCompleteListeners=kk.addReadyStateCompleteListener=kk.isReadyStateComplete=kk.removeDOMReadyListener=kk.addDOMReadyListener=kk.setIsDOMReady=kk.isDOMReady=kk.iterateShadowHosts=kk.watchForNodePosition=kk.removeNode=kk.createNodeAsap=void 0;const xG=fc("../utils/log"),NC=fc("../../utils/throttle"),Ay=fc("../../utils/array"),Nc=fc("../../utils/time");function sR({selectNode:fc,createNode:mU,updateNode:kk,selectTarget:xG,createTarget:NC,isTargetMutation:Ay}){const Nc=xG();if(Nc){const xG=fc();xG?kk(xG):mU(Nc)}else{const kk=new MutationObserver((kk=>{const NC=undefined;if(kk.find(Ay)){sR();const kk=xG();fc()||mU(kk)}})),Nc=()=>{if("complete"!==document.readyState)return;sR();const kk=xG()||NC();fc()||mU(kk)},sR=()=>{document.removeEventListener("readystatechange",Nc),kk.disconnect()};"complete"===document.readyState?Nc():(document.addEventListener("readystatechange",Nc),kk.observe(document,{childList:!0,subtree:!0}))}}function Eo(fc){fc&&fc.parentNode&&fc.parentNode.removeChild(fc)}function Zy(fc,mU,kk=Function.prototype){const Ay=10,sR=(0,Nc.getDuration)({seconds:2}),Eo=(0,Nc.getDuration)({seconds:10}),Zy=fc.previousSibling;let jK=fc.parentNode;if(!jK)throw new Error("Unable to watch for node position: parent element not found");if("prev-sibling"===mU&&!Zy)throw new Error("Unable to watch for node position: there is no previous sibling");let PU=0,wM=null,pR=null;const fx=(0,NC.throttle)((()=>{if(pR)return;PU++;const NC=Date.now();if(null==wM)wM=NC;else if(PU>=Ay){if(NC-wM<Eo)return(0,xG.logWarn)(`Node position watcher paused: retry in ${sR}ms`,fc,Zy),void(pR=setTimeout((()=>{wM=null,PU=0,pR=null,fx()}),sR));wM=NC,PU=1}if("head"===mU&&Zy&&Zy.parentNode!==jK)return(0,xG.logWarn)("Unable to restore node position: sibling parent changed",fc,Zy,jK),void wZ();if("prev-sibling"===mU){if(null==Zy.parentNode)return(0,xG.logWarn)("Unable to restore node position: sibling was removed",fc,Zy,jK),void wZ();Zy.parentNode!==jK&&((0,xG.logWarn)("Style was moved to another parent",fc,Zy,jK),Vd(Zy.parentNode))}"head"!==mU||jK.isConnected||(jK=document.head),(0,xG.logWarn)("Restoring node position",fc,Zy,jK),jK.insertBefore(fc,Zy&&Zy.isConnected?Zy.nextSibling:jK.firstChild),gW.takeRecords(),kk&&kk()})),gW=new MutationObserver((()=>{("head"===mU&&(fc.parentNode!==jK||!fc.parentNode.isConnected)||"prev-sibling"===mU&&fc.previousSibling!==Zy)&&fx()})),ZR=()=>{gW.observe(jK,{childList:!0})},wZ=()=>{clearTimeout(pR),gW.disconnect(),fx.cancel()},iR=()=>{gW.takeRecords()},Vd=fc=>{jK=fc,wZ(),ZR()};return ZR(),{run:ZR,stop:wZ,skip:iR}}function jK(fc,mU){if(null==fc)return;const kk=document.createTreeWalker(fc,NodeFilter.SHOW_ELEMENT,{acceptNode:fc=>null==fc.shadowRoot?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT});for(let xG=fc.shadowRoot?kk.currentNode:kk.nextNode();null!=xG;xG=kk.nextNode())xG.classList.contains("surfingkeys_hints_host")||(mU(xG),jK(xG.shadowRoot,mU))}kk.createNodeAsap=sR,kk.removeNode=Eo,kk.watchForNodePosition=Zy,kk.iterateShadowHosts=jK;let PU=()=>"complete"===document.readyState||"interactive"===document.readyState;function wM(fc){kk.isDOMReady=fc}kk.isDOMReady=PU,kk.setIsDOMReady=wM;const pR=new Set;function fx(fc){(0,kk.isDOMReady)()?fc():pR.add(fc)}function gW(fc){pR.delete(fc)}function ZR(){return"complete"===document.readyState}kk.addDOMReadyListener=fx,kk.removeDOMReadyListener=gW,kk.isReadyStateComplete=ZR;const wZ=new Set;function iR(fc){ZR()?fc():wZ.add(fc)}function Vd(){wZ.clear()}if(kk.addReadyStateCompleteListener=iR,kk.cleanReadyStateCompleteListeners=Vd,!(0,kk.isDOMReady)()){const fc=()=>{(0,kk.isDOMReady)()&&(pR.forEach((fc=>fc())),pR.clear(),ZR()&&(document.removeEventListener("readystatechange",fc),wZ.forEach((fc=>fc())),wZ.clear()))};document.addEventListener("readystatechange",fc)}const fQ=1e3;function DM(fc){if(fc.length>fQ)return!0;let mU=0;for(let kk=0;kk<fc.length;kk++)if(mU+=fc[kk].addedNodes.length,mU>fQ)return!0;return!1}function aY(fc){const mU=new Set,kk=new Set,xG=new Set;fc.forEach((fc=>{(0,Ay.forEach)(fc.addedNodes,(fc=>{fc instanceof Element&&fc.isConnected&&mU.add(fc)})),(0,Ay.forEach)(fc.removedNodes,(fc=>{fc instanceof Element&&(fc.isConnected?(xG.add(fc),mU.delete(fc)):kk.add(fc))}))}));const NC=[],Nc=[];return mU.forEach((fc=>{mU.has(fc.parentElement)&&NC.push(fc)})),kk.forEach((fc=>{kk.has(fc.parentElement)&&Nc.push(fc)})),NC.forEach((fc=>mU.delete(fc))),Nc.forEach((fc=>kk.delete(fc))),{additions:mU,moves:xG,deletions:kk}}const Xi=new Map,oq=new WeakMap;function DX(fc,mU){let xG,NC,Ay;if(Xi.has(fc))xG=Xi.get(fc),NC=oq.get(xG);else{let mU=!1,Nc=!1;xG=new MutationObserver((xG=>{if(DM(xG))!mU||(0,kk.isDOMReady)()?NC.forEach((({onHugeMutations:mU})=>mU(fc))):Nc||(Ay=()=>NC.forEach((({onHugeMutations:mU})=>mU(fc))),fx(Ay),Nc=!0),mU=!0;else{const fc=aY(xG);NC.forEach((({onMinorMutations:mU})=>mU(fc)))}})),xG.observe(fc,{childList:!0,subtree:!0}),Xi.set(fc,xG),NC=new Set,oq.set(xG,NC)}return NC.add(mU),{disconnect(){NC.delete(mU),Ay&&gW(Ay),0===NC.size&&(xG.disconnect(),oq.delete(xG),Xi.delete(fc))}}}kk.createOptimizedTreeObserver=DX},{"../../utils/array":31,"../../utils/throttle":43,"../../utils/time":44,"../utils/log":20}],20:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.logInfoCollapsed=kk.logWarn=kk.logInfo=void 0;const xG=fc("../../utils/message"),NC=!0,Ay=!1,Nc="info";function sR(fc,...mU){Ay&&Nc&&("info"===Nc||"warn"===fc)&&chrome.runtime.sendMessage({type:xG.MessageType.CS_LOG,data:{level:fc,log:mU}})}function Eo(...fc){NC&&sR("info",...fc)}function Zy(...fc){NC&&sR("warn",...fc)}function jK(fc,...mU){}kk.logInfo=Eo,kk.logWarn=Zy,kk.logInfoCollapsed=jK},{"../../utils/message":38}],21:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.DEFAULT_SETTINGS=kk.DEFAULT_COLORSCHEME=kk.DEFAULT_THEME=kk.DEFAULT_COLORS=void 0;const xG=fc("./generators/theme-engines"),NC=fc("./utils/platform"),Ay=fc("./utils/automation");kk.DEFAULT_COLORS={darkScheme:{background:"#181a1b",text:"#e8e6e3"},lightScheme:{background:"#181a1b",text:"#e8e6e3"}},kk.DEFAULT_THEME={mode:1,brightness:100,contrast:110,grayscale:0,sepia:0,useFont:!1,fontFamily:NC.isMacOS?"Helvetica Neue":NC.isWindows?"Segoe UI":"Open Sans",textStroke:0,engine:xG.ThemeEngine.dynamicTheme,stylesheet:"",darkSchemeBackgroundColor:kk.DEFAULT_COLORS.darkScheme.background,darkSchemeTextColor:kk.DEFAULT_COLORS.darkScheme.text,lightSchemeBackgroundColor:kk.DEFAULT_COLORS.lightScheme.background,lightSchemeTextColor:kk.DEFAULT_COLORS.lightScheme.text,scrollbarColor:NC.isMacOS?"":"auto",selectionColor:"auto",styleSystemControls:!1,lightColorScheme:"Default",darkColorScheme:"Default",immediateModify:!1},kk.DEFAULT_COLORSCHEME={light:{Default:{backgroundColor:kk.DEFAULT_COLORS.lightScheme.background,textColor:kk.DEFAULT_COLORS.lightScheme.text}},dark:{Default:{backgroundColor:kk.DEFAULT_COLORS.darkScheme.background,textColor:kk.DEFAULT_COLORS.darkScheme.text}}},kk.DEFAULT_SETTINGS={enabled:!0,fetchNews:!0,theme:kk.DEFAULT_THEME,presets:[],customThemes:[],siteList:[],siteListEnabled:[],applyToListedOnly:!1,changeBrowserTheme:!1,syncSettings:!0,syncSitesFixes:!1,automation:{enabled:!1,mode:Ay.AutomationMode.NONE,behavior:"OnOff"},time:{activation:"18:00",deactivation:"9:00"},location:{latitude:null,longitude:null},previewNewDesign:!1,enableForPDF:!0,enableForProtectedPages:!1,enableContextMenus:!1,detectDarkTheme:!1}},{"./generators/theme-engines":26,"./utils/automation":33,"./utils/platform":41}],22:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.formatInversionFixes=kk.parseInversionFixes=kk.getInversionFixesFor=kk.getCSSFilterValue=kk.cssFilterStyleSheetTemplate=kk.hasFirefoxNewRootBehavior=kk.hasPatchForChromiumIssue501582=kk.FilterMode=void 0;const xG=fc("./utils/format"),NC=fc("./utils/matrix"),Ay=fc("./utils/parse"),Nc=fc("../utils/text"),sR=fc("../utils/url"),Eo=fc("./text-style"),Zy=fc("../utils/platform");var jK;function PU(){return!0}function wM(){return Boolean(Zy.isFirefox&&(0,Zy.compareChromeVersions)(Zy.firefoxVersion,"102.0")>=0)}function pR(fc,mU,kk,xG,NC){const Ay=undefined,Nc=undefined;return fx(gW(fc),"invert(100%) hue-rotate(180deg)",fc,mU,kk,xG,NC)}function fx(fc,mU,kk,xG,Ay,Nc,sR){const Zy=Vd(xG,Nc,sR),pR=[];if(pR.push("@media screen {"),fc&&Ay&&(pR.push(""),pR.push("/* Leading rule */"),pR.push(ZR(fc))),kk.mode===jK.dark&&(pR.push(""),pR.push("/* Reverse rule */"),pR.push(iR(mU,Zy))),(kk.useFont||kk.textStroke>0)&&(pR.push(""),pR.push("/* Font */"),pR.push((0,Eo.createTextStyle)(kk))),pR.push(""),pR.push("/* Text contrast */"),pR.push("html {"),pR.push("  text-shadow: 0 0 0 !important;"),pR.push("}"),pR.push(""),pR.push("/* Full screen */"),[":-webkit-full-screen",":-moz-full-screen",":fullscreen"].forEach((fc=>{pR.push(`${fc}, ${fc} * {`),pR.push("  -webkit-filter: none !important;"),pR.push("  filter: none !important;"),pR.push("}")})),Ay){const fc=[255,255,255],mU=PU()||wM()||kk.mode!==jK.dark?fc:(0,NC.applyColorMatrix)(fc,(0,NC.createFilterMatrix)(kk)).map(Math.round);pR.push(""),pR.push("/* Page background */"),pR.push("html {"),pR.push(`  background: rgb(${mU.join(",")}) !important;`),pR.push("}")}return Zy.css&&Zy.css.length>0&&kk.mode===jK.dark&&(pR.push(""),pR.push("/* Custom rules */"),pR.push(Zy.css)),pR.push(""),pR.push("}"),pR.join("\n")}function gW(fc){const mU=[];return fc.mode===jK.dark&&mU.push("invert(100%) hue-rotate(180deg)"),100!==fc.brightness&&mU.push(`brightness(${fc.brightness}%)`),100!==fc.contrast&&mU.push(`contrast(${fc.contrast}%)`),0!==fc.grayscale&&mU.push(`grayscale(${fc.grayscale}%)`),0!==fc.sepia&&mU.push(`sepia(${fc.sepia}%)`),0===mU.length?null:mU.join(" ")}function ZR(fc){return["html {",`  -webkit-filter: ${fc} !important;`,`  filter: ${fc} !important;`,"}"].join("\n")}function wZ(fc){return fc.map((fc=>fc.replace(/\,$/,""))).join(",\n")}function iR(fc,mU){const kk=[];return mU.invert.length>0&&(kk.push(`${wZ(mU.invert)} {`),kk.push(`  -webkit-filter: ${fc} !important;`),kk.push(`  filter: ${fc} !important;`),kk.push("}")),mU.noinvert.length>0&&(kk.push(`${wZ(mU.noinvert)} {`),kk.push("  -webkit-filter: none !important;"),kk.push("  filter: none !important;"),kk.push("}")),mU.removebg.length>0&&(kk.push(`${wZ(mU.removebg)} {`),kk.push("  background: white !important;"),kk.push("}")),kk.join("\n")}function Vd(fc,mU,kk){const xG=(0,Ay.getSitesFixesFor)(fc,mU,kk,{commands:Object.keys(fQ),getCommandPropName:fc=>fQ[fc],parseCommandValue:(fc,mU)=>"CSS"===fc?mU.trim():(0,Nc.parseArray)(mU)}),NC={url:xG[0].url,invert:xG[0].invert||[],noinvert:xG[0].noinvert||[],removebg:xG[0].removebg||[],css:xG[0].css||""};if(fc){const mU=xG.slice(1).filter((mU=>(0,sR.isURLInList)(fc,mU.url))).sort(((fc,mU)=>mU.url[0].length-fc.url[0].length));if(mU.length>0){const fc=mU[0];return{url:fc.url,invert:NC.invert.concat(fc.invert||[]),noinvert:NC.noinvert.concat(fc.noinvert||[]),removebg:NC.removebg.concat(fc.removebg||[]),css:[NC.css,fc.css].filter((fc=>fc)).join("\n")}}}return NC}!function(fc){fc[fc["light"]=0]="light",fc[fc["dark"]=1]="dark"}(jK=kk.FilterMode||(kk.FilterMode={})),kk.hasPatchForChromiumIssue501582=PU,kk.hasFirefoxNewRootBehavior=wM,kk.default=pR,kk.cssFilterStyleSheetTemplate=fx,kk.getCSSFilterValue=gW,kk.getInversionFixesFor=Vd;const fQ={INVERT:"invert","NO INVERT":"noinvert","REMOVE BG":"removebg",CSS:"css"};function DM(fc){return(0,Ay.parseSitesFixesConfig)(fc,{commands:Object.keys(fQ),getCommandPropName:fc=>fQ[fc],parseCommandValue:(fc,mU)=>"CSS"===fc?mU.trim():(0,Nc.parseArray)(mU)})}function aY(fc){const mU=fc.slice().sort(((fc,mU)=>(0,sR.compareURLPatterns)(fc.url[0],mU.url[0])));return(0,xG.formatSitesFixesConfig)(mU,{props:Object.values(fQ),getPropCommandName:fc=>Object.entries(fQ).find((([,mU])=>mU===fc))[0],formatPropValue:(fc,mU)=>"css"===fc?mU.trim().replace(/\n+/g,"\n"):(0,Nc.formatArray)(mU).trim(),shouldIgnoreProp:(fc,mU)=>"css"===fc?!mU:!(Array.isArray(mU)&&mU.length>0)})}kk.parseInversionFixes=DM,kk.formatInversionFixes=aY},{"../utils/platform":41,"../utils/text":42,"../utils/url":46,"./text-style":25,"./utils/format":27,"./utils/matrix":28,"./utils/parse":29}],23:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.modifyGradientColor=kk.modifyShadowColor=kk.modifyBorderColor=kk.modifyForegroundColor=kk.modifyBackgroundColor=kk.modifyColor=kk.clearColorModificationCache=void 0;const xG=fc("../utils/color"),NC=fc("../utils/math"),Ay=fc("./utils/matrix");function Nc(fc){const mU=undefined,kk=undefined;return fc[1===fc.mode?"darkSchemeBackgroundColor":"lightSchemeBackgroundColor"]}function sR(fc){const mU=undefined,kk=undefined;return fc[1===fc.mode?"darkSchemeTextColor":"lightSchemeTextColor"]}const Eo=new Map;function Zy(){Eo.clear()}kk.clearColorModificationCache=Zy;const jK=["r","g","b","a"],PU=["mode","brightness","contrast","grayscale","sepia","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor"];function wM(fc,mU){let kk="";return jK.forEach((mU=>{kk+=`${fc[mU]};`})),PU.forEach((fc=>{kk+=`${mU[fc]};`})),kk}function pR(fc,mU,kk,NC,Nc){let sR;Eo.has(kk)?sR=Eo.get(kk):(sR=new Map,Eo.set(kk,sR));const Zy=wM(fc,mU);if(sR.has(Zy))return sR.get(Zy);const jK=undefined,PU=undefined,pR=undefined,fx=kk((0,xG.rgbToHSL)(fc),null==NC?null:(0,xG.parseToHSLWithCache)(NC),null==Nc?null:(0,xG.parseToHSLWithCache)(Nc)),{r:gW,g:ZR,b:wZ,a:iR}=(0,xG.hslToRGB)(fx),Vd=(0,Ay.createFilterMatrix)(mU),[fQ,DM,aY]=(0,Ay.applyColorMatrix)([gW,ZR,wZ],Vd),Xi=1===iR?(0,xG.rgbToHexString)({r:fQ,g:DM,b:aY}):(0,xG.rgbToString)({r:fQ,g:DM,b:aY,a:iR});return sR.set(Zy,Xi),Xi}function fx(fc){return fc}function gW(fc,mU){return pR(fc,mU,fx)}function ZR(fc,mU){const kk=Nc(mU),xG=undefined;return pR(fc,mU,wZ,sR(mU),kk)}function wZ({h:fc,s:mU,l:kk,a:xG},Ay,Nc){const sR=kk<.5;let Eo;if(sR)Eo=kk<.2||mU<.12;else{const xG=undefined;Eo=mU<.24||kk>.8&&(fc>200&&fc<280)}let Zy=fc,jK=kk;Eo&&(sR?(Zy=Ay.h,jK=Ay.s):(Zy=Nc.h,jK=Nc.s));const PU=undefined;return{h:Zy,s:jK,l:(0,NC.scale)(kk,0,1,Ay.l,Nc.l),a:xG}}kk.modifyColor=gW;const iR=.4;function Vd({h:fc,s:mU,l:kk,a:xG},Ay){const Nc=undefined,sR=undefined,Eo=mU<.12||kk>.8&&(fc>200&&fc<280);if(kk<.5){const Nc=(0,NC.scale)(kk,0,.5,0,iR);if(Eo){const fc=undefined,mU=undefined;return{h:Ay.h,s:Ay.s,l:Nc,a:xG}}return{h:fc,s:mU,l:Nc,a:xG}}let Zy=(0,NC.scale)(kk,.5,1,iR,Ay.l);if(Eo){const fc=undefined,mU=undefined;return{h:Ay.h,s:Ay.s,l:Zy,a:xG}}let jK=fc;const PU=undefined;if(fc>60&&fc<180){const mU=undefined;jK=fc>120?(0,NC.scale)(fc,120,180,135,180):(0,NC.scale)(fc,60,120,60,105)}return jK>40&&jK<80&&(Zy*=.75),{h:jK,s:mU,l:Zy,a:xG}}function fQ(fc,mU){if(0===mU.mode)return ZR(fc,mU);const kk=Nc(mU);return pR(fc,Object.assign(Object.assign({},mU),{mode:0}),Vd,kk)}kk.modifyBackgroundColor=fQ;const DM=.55;function aY(fc){return(0,NC.scale)(fc,205,245,205,220)}function Xi({h:fc,s:mU,l:kk,a:xG},Ay){const Nc=undefined,sR=kk<.2||mU<.24,Eo=!sR&&fc>205&&fc<245;if(kk>.5){const Nc=(0,NC.scale)(kk,.5,1,DM,Ay.l);if(sR){const fc=undefined,mU=undefined;return{h:Ay.h,s:Ay.s,l:Nc,a:xG}}let Zy=fc;return Eo&&(Zy=aY(fc)),{h:Zy,s:mU,l:Nc,a:xG}}if(sR){const fc=undefined,mU=undefined,Nc=undefined;return{h:Ay.h,s:Ay.s,l:(0,NC.scale)(kk,0,.5,Ay.l,DM),a:xG}}let Zy=fc,jK;return Eo?(Zy=aY(fc),jK=(0,NC.scale)(kk,0,.5,Ay.l,Math.min(1,DM+.05))):jK=(0,NC.scale)(kk,0,.5,Ay.l,DM),{h:Zy,s:mU,l:jK,a:xG}}function oq(fc,mU){if(0===mU.mode)return ZR(fc,mU);const kk=sR(mU);return pR(fc,Object.assign(Object.assign({},mU),{mode:0}),Xi,kk)}function DX({h:fc,s:mU,l:kk,a:xG},Ay,Nc){const sR=undefined,Eo=undefined;let Zy=fc,jK=mU;(kk<.2||mU<.24)&&(kk<.5?(Zy=Ay.h,jK=Ay.s):(Zy=Nc.h,jK=Nc.s));const PU=undefined;return{h:Zy,s:jK,l:(0,NC.scale)(kk,0,1,.5,.2),a:xG}}function Tu(fc,mU){if(0===mU.mode)return ZR(fc,mU);const kk=sR(mU),xG=Nc(mU);return pR(fc,Object.assign(Object.assign({},mU),{mode:0}),DX,kk,xG)}function QP(fc,mU){return fQ(fc,mU)}function We(fc,mU){return fQ(fc,mU)}kk.modifyForegroundColor=oq,kk.modifyBorderColor=Tu,kk.modifyShadowColor=QP,kk.modifyGradientColor=We},{"../utils/color":34,"../utils/math":37,"./utils/matrix":28}],24:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.getSVGReverseFilterMatrixValue=kk.getSVGFilterMatrixValue=kk.createSVGFilterStylesheet=void 0;const xG=fc("./utils/matrix"),NC=fc("./css-filter"),Ay=fc("../utils/platform"),Nc=fc("../const");function sR(fc,mU,kk,xG,sR){let Zy,wM;return Ay.isFirefox?(Zy=Eo(jK(fc)),wM=Eo(PU())):(Zy=`url(#${Nc.MISC_PREFIX}-filter)`,wM=`url(#${Nc.MISC_PREFIX}-reverse-filter)`),(0,NC.cssFilterStyleSheetTemplate)(Zy,wM,fc,mU,kk,xG,sR)}function Eo(fc){const mU=`${Nc.MISC_PREFIX}-filter`,kk=['<svg xmlns="http://www.w3.org/2000/svg">',`<filter id="${mU}" style="color-interpolation-filters: sRGB;">`,`<feColorMatrix type="matrix" values="${fc}" />`,"</filter>","</svg>"].join("");return`url(data:image/svg+xml;base64,${btoa(kk)}#${mU})`}function Zy(fc){return fc.slice(0,4).map((fc=>fc.map((fc=>fc.toFixed(3))).join(" "))).join(" ")}function jK(fc){return Zy((0,xG.createFilterMatrix)(fc))}function PU(){return Zy(xG.Matrix.invertNHue())}kk.createSVGFilterStylesheet=sR,kk.getSVGFilterMatrixValue=jK,kk.getSVGReverseFilterMatrixValue=PU},{"../const":2,"../utils/platform":41,"./css-filter":22,"./utils/matrix":28}],25:[function(fc,mU,kk){"use strict";function xG(fc){const mU=[];return mU.push('*:not(pre, pre *, code, .far, .fa, .glyphicon, [class*="vjs-"], .fab, .fa-github, .fas, .material-icons, .icofont, .typcn, mu, [class*="mu-"], .glyphicon, .icon) {'),fc.useFont&&fc.fontFamily&&mU.push(`  font-family: ${fc.fontFamily} !important;`),fc.textStroke>0&&(mU.push(`  -webkit-text-stroke: ${fc.textStroke}px !important;`),mU.push(`  text-stroke: ${fc.textStroke}px !important;`)),mU.push("}"),mU.join("\n")}Object.defineProperty(kk,"__esModule",{value:!0}),kk.createTextStyle=void 0,kk.createTextStyle=xG},{}],26:[function(fc,mU,kk){"use strict";var xG;Object.defineProperty(kk,"__esModule",{value:!0}),kk.ThemeEngine=void 0,function(fc){fc["cssFilter"]="cssFilter",fc["svgFilter"]="svgFilter",fc["staticTheme"]="staticTheme",fc["dynamicTheme"]="dynamicTheme"}(xG=kk.ThemeEngine||(kk.ThemeEngine={}))},{}],27:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.formatSitesFixesConfig=void 0;const xG=fc("../../utils/array");function NC(fc,mU){const kk=[];return fc.forEach(((NC,Ay)=>{(0,xG.push)(kk,NC.url),mU.props.forEach((fc=>{const xG=mU.getPropCommandName(fc),Ay=NC[fc];if(mU.shouldIgnoreProp(fc,Ay))return;kk.push(""),kk.push(xG);const Nc=mU.formatPropValue(fc,Ay);Nc&&kk.push(Nc)})),Ay<fc.length-1&&(kk.push(""),kk.push("=".repeat(32)),kk.push(""))})),kk.push(""),kk.join("\n")}kk.formatSitesFixesConfig=NC},{"../../utils/array":31}],28:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.Matrix=kk.applyColorMatrix=kk.createFilterMatrix=void 0;const xG=fc("../../utils/math");function NC(fc){let mU=kk.Matrix.identity();return 0!==fc.sepia&&(mU=(0,xG.multiplyMatrices)(mU,kk.Matrix.sepia(fc.sepia/100))),0!==fc.grayscale&&(mU=(0,xG.multiplyMatrices)(mU,kk.Matrix.grayscale(fc.grayscale/100))),100!==fc.contrast&&(mU=(0,xG.multiplyMatrices)(mU,kk.Matrix.contrast(fc.contrast/100))),100!==fc.brightness&&(mU=(0,xG.multiplyMatrices)(mU,kk.Matrix.brightness(fc.brightness/100))),1===fc.mode&&(mU=(0,xG.multiplyMatrices)(mU,kk.Matrix.invertNHue())),mU}function Ay([fc,mU,kk],NC){const Ay=[[fc/255],[mU/255],[kk/255],[1],[1]],Nc=(0,xG.multiplyMatrices)(NC,Ay);return[0,1,2].map((fc=>(0,xG.clamp)(Math.round(255*Nc[fc][0]),0,255)))}kk.createFilterMatrix=NC,kk.applyColorMatrix=Ay,kk.Matrix={identity:()=>[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]],invertNHue:()=>[[.333,-.667,-.667,0,1],[-.667,.333,-.667,0,1],[-.667,-.667,.333,0,1],[0,0,0,1,0],[0,0,0,0,1]],brightness:fc=>[[fc,0,0,0,0],[0,fc,0,0,0],[0,0,fc,0,0],[0,0,0,1,0],[0,0,0,0,1]],contrast(fc){const mU=(1-fc)/2;return[[fc,0,0,0,mU],[0,fc,0,0,mU],[0,0,fc,0,mU],[0,0,0,1,0],[0,0,0,0,1]]},sepia:fc=>[[.393+.607*(1-fc),.769-.769*(1-fc),.189-.189*(1-fc),0,0],[.349-.349*(1-fc),.686+.314*(1-fc),.168-.168*(1-fc),0,0],[.272-.272*(1-fc),.534-.534*(1-fc),.131+.869*(1-fc),0,0],[0,0,0,1,0],[0,0,0,0,1]],grayscale:fc=>[[.2126+.7874*(1-fc),.7152-.7152*(1-fc),.0722-.0722*(1-fc),0,0],[.2126-.2126*(1-fc),.7152+.2848*(1-fc),.0722-.0722*(1-fc),0,0],[.2126-.2126*(1-fc),.7152-.7152*(1-fc),.0722+.9278*(1-fc),0,0],[0,0,0,1,0],[0,0,0,0,1]]}},{"../../utils/math":37}],29:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.isURLInSiteList=kk.indexSiteListConfig=kk.getSitesFixesFor=kk.indexSitesFixesConfig=kk.getDomain=kk.parseSitesFixesConfig=void 0;const xG=fc("../../utils/url"),NC=fc("../../utils/text"),Ay=6e4;function Nc(fc,mU){const kk=[],xG=undefined;return fc.replace(/\r/g,"").split(/^\s*={2,}\s*$/gm).forEach((fc=>{const xG=fc.split("\n"),Ay=[];if(xG.forEach(((fc,mU)=>{fc.match(/^[A-Z]+(\s[A-Z]+){0,2}$/)&&Ay.push(mU)})),0===Ay.length)return;const Nc={url:(0,NC.parseArray)(xG.slice(0,Ay[0]).join("\n"))};Ay.forEach(((fc,kk)=>{const NC=xG[fc].trim(),sR=xG.slice(fc+1,kk===Ay.length-1?xG.length:Ay[kk+1]).join("\n"),Eo=mU.getCommandPropName(NC);if(!Eo)return;const Zy=mU.parseCommandValue(NC,sR);Nc[Eo]=Zy})),kk.push(Nc)})),kk}function sR(fc){try{return new URL(fc).hostname.toLowerCase()}catch(mU){return fc.split("/")[0].toLowerCase()}}function Eo(fc){return fc.map((([fc,mU])=>{const kk=fc.toString(36),xG=mU.toString(36);return"0".repeat(4-kk.length)+kk+"0".repeat(3-xG.length)+xG})).join("")}function Zy(fc,mU){const kk=(4+3)*mU,xG=parseInt(fc.substring(kk+0,kk+4),36),NC=undefined;return[xG,xG+parseInt(fc.substring(kk+4,kk+4+3),36)]}function jK(fc,mU,kk){fc[mU]?fc[mU].includes(kk)||fc[mU].push(kk):fc[mU]=[kk]}function PU(fc){const mU=fc.lastIndexOf("*"),kk=fc.substring(mU+2);if(mU<0||0===kk.length)return fc.split(".");const xG=[kk],NC=undefined;return fc.substring(0,mU).split(".").filter(Boolean).forEach((fc=>xG.concat(fc))),xG}function wM(fc){const mU={},kk={},NC=[],Ay={},Nc=[];for(let kk=0;kk<fc.length;kk++){const Eo=fc[kk],Zy=new Set;for(const fc of Eo){const Ay=sR(fc);if((0,xG.isFullyQualifiedDomain)(Ay))jK(mU,Ay,kk);else{if(!(0,xG.isFullyQualifiedDomainWildcard)(Ay)){NC.push(kk);break}{const fc=PU(Ay);Nc.push({labels:fc,index:kk}),fc.forEach((fc=>Zy.add(fc)))}}}for(const fc of Zy)Ay[fc]?Ay[fc]++:Ay[fc]=1}for(const{labels:fc,index:mU}of Nc){let xG=fc[0];for(const mU of fc)Ay[mU]<Ay[xG]&&(xG=mU);jK(kk,xG,mU)}return{domains:mU,domainLabels:kk,nonstandard:NC}}function pR(fc,mU,kk,xG,Ay){const Nc=undefined,sR=fc.substring(kk,xG).split("\n"),Eo=[];if(sR.forEach(((fc,mU)=>{fc.match(/^[A-Z]+(\s[A-Z]+){0,2}$/)&&Eo.push(mU)})),0===Eo.length)return;mU.push([kk,xG-kk]);const Zy=(0,NC.parseArray)(sR.slice(0,Eo[0]).join("\n"));Ay.push(Zy)}function fx(fc){const mU=[],kk=[];let xG=0;const NC=/^\s*={2,}\s*$/gm;let Ay;for(;Ay=NC.exec(fc);){const NC=Ay.index,Nc=Ay.index+Ay[0].length;pR(fc,kk,xG,NC,mU),xG=Nc}return pR(fc,kk,xG,fc.length,mU),{urls:mU,offsets:kk}}function gW(fc){const{urls:mU,offsets:kk}=fx(fc),{domains:xG,domainLabels:NC,nonstandard:Ay}=wM(mU);return{offsets:Eo(kk),domains:xG,domainLabels:NC,nonstandard:Ay,cacheDomainIndex:{},cacheSiteFix:{},cacheCleanupTimer:null}}function ZR(fc,mU,kk){const NC=sR(fc),Ay=NC.split(".");let Nc=[];"*"in mU.domainLabels&&(Nc=Nc.concat(mU.domainLabels["*"]));for(const fc of Ay)if(fc in mU.domainLabels){const Ay=mU.domainLabels[fc];for(const fc of Ay){const mU=kk(fc);for(const kk of mU){const mU=sR(kk);(0,xG.isFullyQualifiedDomainWildcard)(mU)&&(0,xG.fullyQualifiedDomainMatchesWildcard)(mU,NC)&&Nc.push(fc)}}}for(let fc=0;fc<Ay.length;fc++){const kk=Ay.slice(fc).join(".");kk in mU.domains&&(Nc=Nc.concat(mU.domains[kk])),kk in mU.domainLabels&&(Nc=Nc.concat(mU.domainLabels[kk]))}return Nc=Nc.concat(mU.nonstandard),Nc=Array.from(new Set(Nc)),Nc}function wZ(fc,mU,kk,xG){if(xG in mU.cacheSiteFix)return mU.cacheSiteFix[xG];const[NC,Ay]=Zy(mU.offsets,xG),sR=undefined,Eo=Nc(fc.substring(NC,Ay),kk)[0];return mU.cacheSiteFix[xG]=Eo,Eo}function iR(fc){clearTimeout(fc.cacheCleanupTimer),fc.cacheCleanupTimer=setTimeout((()=>{fc.cacheCleanupTimer=null,fc.cacheDomainIndex={},fc.cacheSiteFix={}}),Ay)}function Vd(fc,mU,kk,xG){const NC=[],Ay=sR(fc);kk.cacheDomainIndex[Ay]||(kk.cacheDomainIndex[Ay]=ZR(Ay,kk,(fc=>wZ(mU,kk,xG,fc).url)));const Nc=kk.cacheDomainIndex[Ay];for(const fc of Nc){const Ay=wZ(mU,kk,xG,fc);NC.push(Ay)}return iR(kk),NC}function fQ(fc){const mU=(0,NC.parseArray)(fc),kk=mU.map((fc=>[fc])),{domains:xG,domainLabels:Ay,nonstandard:Nc}=wM(kk);return{domains:xG,domainLabels:Ay,nonstandard:Nc,urls:mU}}function DM(fc,mU){const kk=undefined,xG=ZR(sR(fc),mU,(fc=>[mU.urls[fc]])),NC=[];for(const fc of xG)NC.push(mU.urls[fc]);return NC}function aY(fc,mU){if(null===mU)return!1;const kk=DM(fc,mU);return(0,xG.isURLInList)(fc,kk)}kk.parseSitesFixesConfig=Nc,kk.getDomain=sR,kk.indexSitesFixesConfig=gW,kk.getSitesFixesFor=Vd,kk.indexSiteListConfig=fQ,kk.isURLInSiteList=aY},{"../../utils/text":42,"../../utils/url":46}],30:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.PREFIX=void 0,kk.PREFIX="dm"},{}],31:[function(fc,mU,kk){"use strict";function xG(fc){return null!=fc.length}function NC(fc,mU){if(xG(fc))for(let kk=0,xG=fc.length;kk<xG;kk++)mU(fc[kk]);else for(const kk of fc)mU(kk)}function Ay(fc,mU){NC(mU,(mU=>fc.push(mU)))}function Nc(fc){const mU=[];for(let kk=0,xG=fc.length;kk<xG;kk++)mU.push(fc[kk]);return mU}Object.defineProperty(kk,"__esModule",{value:!0}),kk.toArray=kk.push=kk.forEach=void 0,kk.forEach=NC,kk.push=Ay,kk.toArray=Nc},{}],32:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0});class xG{constructor(){this.queue=[],this.timerId=null,this.frameDuration=1e3/60}addToQueue(fc){this.queue.push(fc),this.startQueue()}stopQueue(){null!==this.timerId&&(cancelAnimationFrame(this.timerId),this.timerId=null),this.queue=[]}startQueue(){this.timerId||(this.timerId=requestAnimationFrame((()=>{this.timerId=null;const fc=Date.now();let mU;for(;mU=this.queue.shift();)if(mU(),Date.now()-fc>=this.frameDuration){this.startQueue();break}})))}}kk.default=xG},{}],33:[function(fc,mU,kk){"use strict";var xG;Object.defineProperty(kk,"__esModule",{value:!0}),kk.AutomationMode=void 0,function(fc){fc["NONE"]="",fc["TIME"]="time",fc["SYSTEM"]="system",fc["LOCATION"]="location"}(xG=kk.AutomationMode||(kk.AutomationMode={}))},{}],34:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.getSRGBLightness=kk.lowerCalcExpression=kk.parse=kk.hslToString=kk.rgbToHexString=kk.rgbToString=kk.rgbToHSL=kk.hslToRGB=kk.clearColorCache=kk.parseToHSLWithCache=kk.parseColorWithCache=void 0;const xG=fc("./math-eval"),NC=fc("./text"),Ay=new Map,Nc=new Map;function sR(fc){if(fc=fc.trim(),Nc.has(fc))return Nc.get(fc);fc.includes("calc(")&&(fc=aD(fc));const mU=Vd(fc);return mU&&Nc.set(fc,mU),mU}function Eo(fc){if(Ay.has(fc))return Ay.get(fc);const mU=sR(fc);if(!mU)return null;const kk=PU(mU);return Ay.set(fc,kk),kk}function Zy(){Ay.clear(),Nc.clear()}function jK({h:fc,s:mU,l:kk,a:xG=1}){if(0===mU){const[fc,mU,NC]=[kk,kk,kk].map((fc=>Math.round(255*fc)));return{r:fc,g:NC,b:mU,a:xG}}const NC=(1-Math.abs(2*kk-1))*mU,Ay=NC*(1-Math.abs(fc/60%2-1)),Nc=kk-NC/2,[sR,Eo,Zy]=(fc<60?[NC,Ay,0]:fc<120?[Ay,NC,0]:fc<180?[0,NC,Ay]:fc<240?[0,Ay,NC]:fc<300?[Ay,0,NC]:[NC,0,Ay]).map((fc=>Math.round(255*(fc+Nc))));return{r:sR,g:Eo,b:Zy,a:xG}}function PU({r:fc,g:mU,b:kk,a:xG=1}){const NC=fc/255,Ay=mU/255,Nc=kk/255,sR=Math.max(NC,Ay,Nc),Eo=Math.min(NC,Ay,Nc),Zy=sR-Eo,jK=(sR+Eo)/2;if(0===Zy)return{h:0,s:0,l:jK,a:xG};let PU=60*(sR===NC?(Ay-Nc)/Zy%6:sR===Ay?(Nc-NC)/Zy+2:(NC-Ay)/Zy+4);PU<0&&(PU+=360);const wM=undefined;return{h:PU,s:Zy/(1-Math.abs(2*jK-1)),l:jK,a:xG}}function wM(fc,mU=0){const kk=fc.toFixed(mU);if(0===mU)return kk;const xG=kk.indexOf(".");if(xG>=0){const fc=kk.match(/0+$/);if(fc)return fc.index===xG+1?kk.substring(0,xG):kk.substring(0,fc.index)}return kk}function pR(fc){const{r:mU,g:kk,b:xG,a:NC}=fc;return null!=NC&&NC<1?`rgba(${wM(mU)}, ${wM(kk)}, ${wM(xG)}, ${wM(NC,2)})`:`rgb(${wM(mU)}, ${wM(kk)}, ${wM(xG)})`}function fx({r:fc,g:mU,b:kk,a:xG}){return`#${(null!=xG&&xG<1?[fc,mU,kk,Math.round(255*xG)]:[fc,mU,kk]).map((fc=>`${fc<16?"0":""}${fc.toString(16)}`)).join("")}`}function gW(fc){const{h:mU,s:kk,l:xG,a:NC}=fc;return null!=NC&&NC<1?`hsla(${wM(mU)}, ${wM(100*kk)}%, ${wM(100*xG)}%, ${wM(NC,2)})`:`hsl(${wM(mU)}, ${wM(100*kk)}%, ${wM(100*xG)}%)`}kk.parseColorWithCache=sR,kk.parseToHSLWithCache=Eo,kk.clearColorCache=Zy,kk.hslToRGB=jK,kk.rgbToHSL=PU,kk.rgbToString=pR,kk.rgbToHexString=fx,kk.hslToString=gW;const ZR=/^rgba?\([^\(\)]+\)$/,wZ=/^hsla?\([^\(\)]+\)$/,iR=/^#[0-9a-f]+$/i;function Vd(fc){const mU=fc.trim().toLowerCase();return mU.match(ZR)?oq(mU):mU.match(wZ)?QP(mU):mU.match(iR)?We(mU):Nq.has(mU)?ns(mU):vn.has(mU)?ZF(mU):"transparent"===fc?{r:0,g:0,b:0,a:0}:null}function fQ(fc){const mU=[];let kk=0,xG=!1;const NC=fc.indexOf("(");fc=fc.substring(NC+1,fc.length-1);for(let NC=0;NC<fc.length;NC++){const Ay=fc[NC];Ay>="0"&&Ay<="9"||"."===Ay||"+"===Ay||"-"===Ay?xG=!0:!xG||" "!==Ay&&","!==Ay&&"/"!==Ay?xG||(kk=NC+1):(mU.push(fc.substring(kk,NC)),xG=!1,kk=NC+1)}return xG&&mU.push(fc.substring(kk,fc.length)),mU}function DM(fc,mU,kk){const xG=fQ(fc),NC=Object.entries(kk),Ay=undefined;return xG.map((fc=>fc.trim())).map(((fc,kk)=>{let xG;const Ay=NC.find((([mU])=>fc.endsWith(mU)));return xG=Ay?parseFloat(fc.substring(0,fc.length-Ay[0].length))/Ay[1]*mU[kk]:parseFloat(fc),mU[kk]>1?Math.round(xG):xG}))}kk.parse=Vd;const aY=[255,255,255,1],Xi={"%":100};function oq(fc){const[mU,kk,xG,NC=1]=DM(fc,aY,Xi);return{r:mU,g:kk,b:xG,a:NC}}const DX=[360,1,1,1],Tu={"%":100,deg:360,rad:2*Math.PI,turn:1};function QP(fc){const[mU,kk,xG,NC=1]=DM(fc,DX,Tu);return jK({h:mU,s:kk,l:xG,a:NC})}function We(fc){const mU=fc.substring(1);switch(mU.length){case 3:case 4:{const[fc,kk,xG]=[0,1,2].map((fc=>parseInt(`${mU[fc]}${mU[fc]}`,16))),NC=undefined;return{r:fc,g:kk,b:xG,a:3===mU.length?1:parseInt(`${mU[3]}${mU[3]}`,16)/255}}case 6:case 8:{const[fc,kk,xG]=[0,2,4].map((fc=>parseInt(mU.substring(fc,fc+2),16))),NC=undefined;return{r:fc,g:kk,b:xG,a:6===mU.length?1:parseInt(mU.substring(6,8),16)/255}}}return null}function ns(fc){const mU=Nq.get(fc);return{r:mU>>16&255,g:mU>>8&255,b:mU>>0&255,a:1}}function ZF(fc){const mU=vn.get(fc);return{r:mU>>16&255,g:mU>>8&255,b:mU>>0&255,a:1}}function aD(fc){let mU=0;const kk=(mU,kk,xG)=>{fc=fc.substring(0,mU)+xG+fc.substring(kk)};for(;-1!==(mU=fc.indexOf("calc("));){const Ay=(0,NC.getParenthesesRange)(fc,mU);if(!Ay)break;let Nc=fc.slice(Ay.start+1,Ay.end-1);const sR=Nc.includes("%");Nc=Nc.split("%").join("");const Eo=Math.round((0,xG.evalMath)(Nc));kk(Ay.start-4,Ay.end,Eo+(sR?"%":""))}return fc}kk.lowerCalcExpression=aD;const Nq=new Map(Object.entries({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074})),vn=new Map(Object.entries({ActiveBorder:3906044,ActiveCaption:0,AppWorkspace:11184810,Background:6513614,ButtonFace:16777215,ButtonHighlight:15329769,ButtonShadow:10461343,ButtonText:0,CaptionText:0,GrayText:8355711,Highlight:11720703,HighlightText:0,InactiveBorder:16777215,InactiveCaption:16777215,InactiveCaptionText:0,InfoBackground:16514245,InfoText:0,Menu:16185078,MenuText:16777215,Scrollbar:11184810,ThreeDDarkShadow:0,ThreeDFace:12632256,ThreeDHighlight:16777215,ThreeDLightShadow:16777215,ThreeDShadow:0,Window:15527148,WindowFrame:11184810,WindowText:0,"-webkit-focus-ring-color":15046400}).map((([fc,mU])=>[fc.toLowerCase(),mU])));function ua(fc,mU,kk){return(.2126*fc+.7152*mU+.0722*kk)/255}kk.getSRGBLightness=ua},{"./math-eval":36,"./text":42}],35:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.compareIPV6=kk.isIPV6=void 0;const xG=/\[[0-9:a-zA-Z]+?\]/;function NC(fc){const mU=xG.exec(fc);if(!mU)return!1;const kk=fc.indexOf("?");return!(kk>=0&&mU.index>kk)}kk.isIPV6=NC;const Ay=/\[.*?\](\:\d+)?/;function Nc(fc,mU){const kk=undefined,xG=undefined;return fc.match(Ay)[0]===mU.match(Ay)[0]}kk.compareIPV6=Nc},{}],36:[function(fc,mU,kk){"use strict";function xG(fc){const mU=[],kk=[];let xG;for(let NC=0,Nc=fc.length;NC<Nc;NC++){const Nc=fc[NC];if(Nc&&" "!==Nc){if(Ay.has(Nc)){const fc=Ay.get(Nc);for(;kk.length;){const xG=Ay.get(kk[0]);if(!xG)break;if(!fc.lessOrEqualThan(xG))break;mU.push(kk.shift())}kk.unshift(Nc)}else!xG||Ay.has(xG)?mU.push(Nc):mU[mU.length-1]+=Nc;xG=Nc}}mU.push(...kk);const NC=[];for(let fc=0,kk=mU.length;fc<kk;fc++){const kk=Ay.get(mU[fc]);if(kk){const fc=NC.splice(0,2);NC.push(kk.exec(fc[1],fc[0]))}else NC.unshift(parseFloat(mU[fc]))}return NC[0]}Object.defineProperty(kk,"__esModule",{value:!0}),kk.evalMath=void 0,kk.evalMath=xG;class NC{constructor(fc,mU){this.precendce=fc,this.execMethod=mU}exec(fc,mU){return this.execMethod(fc,mU)}lessOrEqualThan(fc){return this.precendce<=fc.precendce}}const Ay=new Map([["+",new NC(1,((fc,mU)=>fc+mU))],["-",new NC(1,((fc,mU)=>fc-mU))],["*",new NC(2,((fc,mU)=>fc*mU))],["/",new NC(2,((fc,mU)=>fc/mU))]])},{}],37:[function(fc,mU,kk){"use strict";function xG(fc,mU,kk,xG,NC){return(fc-mU)*(NC-xG)/(kk-mU)+xG}function NC(fc,mU,kk){return Math.min(kk,Math.max(mU,fc))}function Ay(fc,mU){const kk=[];for(let xG=0,NC=fc.length;xG<NC;xG++){kk[xG]=[];for(let NC=0,Ay=mU[0].length;NC<Ay;NC++){let Ay=0;for(let kk=0,Nc=fc[0].length;kk<Nc;kk++)Ay+=fc[xG][kk]*mU[kk][NC];kk[xG][NC]=Ay}}return kk}Object.defineProperty(kk,"__esModule",{value:!0}),kk.multiplyMatrices=kk.clamp=kk.scale=void 0,kk.scale=xG,kk.clamp=NC,kk.multiplyMatrices=Ay},{}],38:[function(fc,mU,kk){"use strict";var xG;Object.defineProperty(kk,"__esModule",{value:!0}),kk.MessageType=void 0,function(fc){fc["UI_GET_DATA"]="ui-get-data",fc["UI_GET_DEVTOOLS_DATA"]="ui-get-devtools-data",fc["UI_SUBSCRIBE_TO_CHANGES"]="ui-subscribe-to-changes",fc["UI_UNSUBSCRIBE_FROM_CHANGES"]="ui-unsubscribe-from-changes",fc["UI_CHANGE_SETTINGS"]="ui-change-settings",fc["UI_SET_THEME"]="ui-set-theme",fc["UI_TOGGLE_ACTIVE_TAB"]="ui-toggle-active-tab",fc["UI_MARK_NEWS_AS_READ"]="ui-mark-news-as-read",fc["UI_MARK_NEWS_AS_DISPLAYED"]="ui-mark-news-as-displayed",fc["UI_LOAD_CONFIG"]="ui-load-config",fc["UI_APPLY_DEV_DYNAMIC_THEME_FIXES"]="ui-apply-dev-dynamic-theme-fixes",fc["UI_RESET_DEV_DYNAMIC_THEME_FIXES"]="ui-reset-dev-dynamic-theme-fixes",fc["UI_APPLY_DEV_INVERSION_FIXES"]="ui-apply-dev-inversion-fixes",fc["UI_RESET_DEV_INVERSION_FIXES"]="ui-reset-dev-inversion-fixes",fc["UI_APPLY_DEV_STATIC_THEMES"]="ui-apply-dev-static-themes",fc["UI_RESET_DEV_STATIC_THEMES"]="ui-reset-dev-static-themes",fc["UI_SAVE_FILE"]="ui-save-file",fc["UI_REQUEST_EXPORT_CSS"]="ui-request-export-css",fc["UI_COLOR_SCHEME_CHANGE"]="ui-color-scheme-change",fc["BG_CHANGES"]="bg-changes",fc["BG_ADD_CSS_FILTER"]="bg-add-css-filter",fc["BG_ADD_STATIC_THEME"]="bg-add-static-theme",fc["BG_ADD_SVG_FILTER"]="bg-add-svg-filter",fc["BG_ADD_DYNAMIC_THEME"]="bg-add-dynamic-theme",fc["BG_EXPORT_CSS"]="bg-export-css",fc["BG_UNSUPPORTED_SENDER"]="bg-unsupported-sender",fc["BG_CLEAN_UP"]="bg-clean-up",fc["BG_RELOAD"]="bg-reload",fc["BG_FETCH_RESPONSE"]="bg-fetch-response",fc["BG_UI_UPDATE"]="bg-ui-update",fc["BG_CSS_UPDATE"]="bg-css-update",fc["CS_COLOR_SCHEME_CHANGE"]="cs-color-scheme-change",fc["CS_FRAME_CONNECT"]="cs-frame-connect",fc["CS_FRAME_FORGET"]="cs-frame-forget",fc["CS_FRAME_FREEZE"]="cs-frame-freeze",fc["CS_FRAME_RESUME"]="cs-frame-resume",fc["CS_EXPORT_CSS_RESPONSE"]="cs-export-css-response",fc["CS_FETCH"]="cs-fetch",fc["CS_DARK_THEME_DETECTED"]="cs-dark-theme-detected",fc["CS_DARK_THEME_NOT_DETECTED"]="cs-dark-theme-not-detected",fc["CS_LOG"]="cs-log"}(xG=kk.MessageType||(kk.MessageType={}))},{}],39:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.loadAsText=kk.readResponseAsDataURL=kk.loadAsDataURL=void 0;const xG=fc("./platform");async function NC(fc,mU,kk){const NC=await fetch(fc,{cache:"force-cache",credentials:"omit",referrer:kk});if(xG.isFirefox&&"text/css"===mU&&fc.startsWith("moz-extension://")&&fc.endsWith(".css"))return NC;if(mU&&!NC.headers.get("Content-Type").startsWith(mU))throw new Error(`Mime type mismatch when loading ${fc}`);if(!NC.ok)throw new Error(`Unable to load ${fc} ${NC.status} ${NC.statusText}`);return NC}async function Ay(fc,mU){const kk=await NC(fc,mU);return await Nc(kk)}async function Nc(fc){const mU=await fc.blob(),kk=undefined;return await new Promise((fc=>{const kk=new FileReader;kk.onloadend=()=>fc(kk.result),kk.readAsDataURL(mU)}))}async function sR(fc,mU,kk){const xG=await NC(fc,mU,kk);return await xG.text()}kk.loadAsDataURL=Ay,kk.readResponseAsDataURL=Nc,kk.loadAsText=sR},{"./platform":41}],40:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.parseGradient=void 0;const xG=fc("./text"),NC="gradient".length,Ay="conic-",Nc=Ay.length,sR="radial-",Eo="linear-";function Zy(fc){const mU=[];let kk=0,Zy=Ay.length;for(;-1!==(kk=fc.indexOf("gradient",Zy));){let jK;if([Eo,sR,Ay].find((mU=>{if(kk-mU.length>=0){const xG=undefined;if(fc.substring(kk-mU.length,kk)===mU)return"repeating"===fc.slice(kk-mU.length-10,kk-mU.length-1)?(jK=`repeating-${mU}gradient`,!0):"-webkit"===fc.slice(kk-mU.length-8,kk-mU.length-1)?(jK=`-webkit-${mU}gradient`,!0):(jK=`${mU}gradient`,!0)}})),!jK)break;const{start:PU,end:wM}=(0,xG.getParenthesesRange)(fc,kk+NC),pR=fc.substring(PU+1,wM-1);Zy=wM+1+Nc,mU.push({typeGradient:jK,match:pR,offset:jK.length+2,index:kk-jK.length+NC,hasComma:!0})}return mU.length&&(mU[mU.length-1].hasComma=!1),mU}kk.parseGradient=Zy},{"./text":42}],41:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.isCSSColorSchemePropSupported=kk.isFetchSupported=kk.isXMLHttpRequestSupported=kk.compareChromeVersions=kk.isDefinedSelectorSupported=kk.firefoxVersion=kk.chromiumVersion=kk.isNonPersistent=kk.isMatchMediaChangeEventListenerBuggy=kk.isMatchMediaChangeEventListenerSupported=kk.isShadowDomSupported=kk.isMobile=kk.isMacOS=kk.isWindows=kk.isSafari=kk.isEdge=kk.isOpera=kk.isYaBrowser=kk.isVivaldi=kk.isFirefox=kk.isThunderbird=kk.isChromium=void 0;const xG="undefined"!=typeof navigator,NC=xG?navigator.userAgentData&&Array.isArray(navigator.userAgentData.brands)?navigator.userAgentData.brands.map((fc=>`${fc.brand.toLowerCase()} ${fc.version}`)).join(" "):navigator.userAgent.toLowerCase():"some useragent",Ay=xG?navigator.userAgentData&&"string"==typeof navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase():navigator.platform.toLowerCase():"some platform";function Nc(fc,mU){const kk=fc.split(".").map((fc=>parseInt(fc))),xG=mU.split(".").map((fc=>parseInt(fc)));for(let fc=0;fc<kk.length;fc++)if(kk[fc]!==xG[fc])return kk[fc]<xG[fc]?-1:1;return 0}kk.isChromium=!0,kk.isThunderbird=!1,kk.isFirefox=!1,kk.isVivaldi=!1,kk.isYaBrowser=!1,kk.isOpera=!1,kk.isEdge=!1,kk.isSafari=!1,kk.isWindows=Ay.startsWith("win"),kk.isMacOS=Ay.startsWith("mac"),kk.isMobile=xG&&navigator.userAgentData?navigator.userAgentData.mobile:NC.includes("mobile"),kk.isShadowDomSupported="function"==typeof ShadowRoot,kk.isMatchMediaChangeEventListenerSupported=!0,kk.isMatchMediaChangeEventListenerBuggy=xG&&navigator.userAgentData&&["Linux","Android"].includes(navigator.userAgentData.platform)||Ay.startsWith("linux"),kk.isNonPersistent=!0,kk.chromiumVersion=(()=>{const fc=NC.match(/chrom(?:e|ium)(?:\/| )([^ ]+)/);return fc&&fc[1]?fc[1]:""})(),kk.firefoxVersion=(()=>{const fc=NC.match(/(?:firefox|librewolf)(?:\/| )([^ ]+)/);return fc&&fc[1]?fc[1]:""})(),kk.isDefinedSelectorSupported=(()=>{try{return document.querySelector(":defined"),!0}catch(fc){return!1}})(),kk.compareChromeVersions=Nc,kk.isXMLHttpRequestSupported="function"==typeof XMLHttpRequest,kk.isFetchSupported="function"==typeof fetch,kk.isCSSColorSchemePropSupported=!0},{}],42:[function(fc,mU,kk){"use strict";function xG(fc,mU){if(!isFinite(mU))throw new Error(`Wrong char index ${mU}`);let kk="",xG=0,NC,Ay=0;do{xG++,NC=Ay,Ay=fc.indexOf("\n",NC+1)}while(Ay>=0&&Ay<=mU);const Nc=mU-NC;return kk+=`line ${xG}, column ${Nc}`,kk+="\n",mU<fc.length?kk+=fc.substring(NC+1,Ay):kk+=fc.substring(fc.lastIndexOf("\n")+1),kk+="\n",kk+=`${new Array(Nc).join("-")}^`,kk}function NC(fc,mU){const kk=Math.min(fc.length,mU.length);for(let xG=0;xG<kk;xG++)if(fc[xG]!==mU[xG])return xG;return fc.length!==mU.length?kk:-1}function Ay(fc){return fc.replace(/\r/g,"").split("\n").map((fc=>fc.trim())).filter((fc=>fc))}function Nc(fc){return fc.concat("").join("\n")}function sR(fc,mU,kk=0){const xG=[];let NC;for(;NC=fc.exec(mU);)xG.push(NC[kk]);return xG}function Eo(fc){return 2*fc.length}function Zy(fc){function mU(fc){return fc.replace(/^\s+/,"")}function kk(fc){return 0===fc?"":" ".repeat(4*fc)}if(fc.length<5e4){const mU=/[^{}]+{\s*}/;for(;mU.test(fc);)fc=fc.replace(mU,"")}const xG=fc.replace(/\s{2,}/g," ").replace(/\{/g,"{\n").replace(/\}/g,"\n}\n").replace(/\;(?![^\(|\"]*(\)|\"))/g,";\n").replace(/\,(?![^\(|\"]*(\)|\"))/g,",\n").replace(/\n\s*\n/g,"\n").split("\n");let NC=0;const Ay=[];for(let fc=0,Nc=xG.length;fc<Nc;fc++){const Nc=`${xG[fc]}\n`;Nc.includes("{")?Ay.push(kk(NC++)+mU(Nc)):Nc.includes("}")?Ay.push(kk(--NC)+mU(Nc)):Ay.push(kk(NC)+mU(Nc))}return Ay.join("").trim()}function jK(fc,mU=0){const kk=fc.length;let xG=0,NC=-1;for(let Ay=mU;Ay<kk;Ay++)if(0===xG){const mU=fc.indexOf("(",Ay);if(mU<0)break;NC=mU,xG++,Ay=mU}else{const mU=fc.indexOf(")",Ay);if(mU<0)break;const kk=fc.indexOf("(",Ay);if(kk<0||mU<kk){if(xG--,0===xG)return{start:NC,end:mU+1};Ay=mU}else xG++,Ay=kk}return null}Object.defineProperty(kk,"__esModule",{value:!0}),kk.getParenthesesRange=kk.formatCSS=kk.getStringSize=kk.getMatches=kk.formatArray=kk.parseArray=kk.getTextDiffIndex=kk.getTextPositionMessage=void 0,kk.getTextPositionMessage=xG,kk.getTextDiffIndex=NC,kk.parseArray=Ay,kk.formatArray=Nc,kk.getMatches=sR,kk.getStringSize=Eo,kk.formatCSS=Zy,kk.getParenthesesRange=jK},{}],43:[function(fc,mU,kk){"use strict";function xG(fc){let mU=!1,kk=null,xG;const NC=(...NC)=>{xG=NC,kk?mU=!0:(fc(...xG),kk=requestAnimationFrame((()=>{kk=null,mU&&(fc(...xG),mU=!1)})))},Ay=()=>{cancelAnimationFrame(kk),mU=!1,kk=null};return Object.assign(NC,{cancel:Ay})}function NC(){const fc=[];let mU=null;function kk(){let kk;for(;kk=fc.shift();)kk();mU=null}function xG(xG){fc.push(xG),mU||(mU=requestAnimationFrame(kk))}function NC(){fc.splice(0),cancelAnimationFrame(mU),mU=null}return{add:xG,cancel:NC}}Object.defineProperty(kk,"__esModule",{value:!0}),kk.createAsyncTasksQueue=kk.throttle=void 0,kk.throttle=xG,kk.createAsyncTasksQueue=NC},{}],44:[function(fc,mU,kk){"use strict";function xG(fc){const mU=fc.split(":").slice(0,2),kk=fc.trim().toLowerCase(),xG=kk.endsWith("am")||kk.endsWith("a.m."),NC=kk.endsWith("pm")||kk.endsWith("p.m.");let Ay=mU.length>0?parseInt(mU[0]):0;(isNaN(Ay)||Ay>23)&&(Ay=0),xG&&12===Ay&&(Ay=0),NC&&Ay<12&&(Ay+=12);let Nc=mU.length>1?parseInt(mU[1]):0;return(isNaN(Nc)||Nc>59)&&(Nc=0),[Ay,Nc]}function NC(fc){return fc.split(":").map((fc=>parseInt(fc)))}function Ay(fc,mU){return fc[0]===mU[0]&&fc[1]===mU[1]?0:fc[0]<mU[0]||fc[0]===mU[0]&&fc[1]<mU[1]?-1:1}function Nc(fc,mU,kk=new Date){const xG=NC(fc),sR=NC(mU),Eo=[kk.getHours(),kk.getMinutes()];return Ay(xG,sR)>0?Nc(mU,fc,kk):0===Ay(xG,sR)?null:Ay(Eo,xG)<0?(kk.setHours(xG[0]),kk.setMinutes(xG[1]),kk.setSeconds(0),kk.setMilliseconds(0),kk.getTime()):Ay(Eo,sR)<0?(kk.setHours(sR[0]),kk.setMinutes(sR[1]),kk.setSeconds(0),kk.setMilliseconds(0),kk.getTime()):new Date(kk.getFullYear(),kk.getMonth(),kk.getDate()+1,xG[0],xG[1]).getTime()}function sR(fc,mU,kk=new Date){const xG=NC(fc),Nc=NC(mU),sR=[kk.getHours(),kk.getMinutes()];return Ay(xG,Nc)>0?Ay(xG,sR)<=0||Ay(sR,Nc)<0:Ay(xG,sR)<=0&&Ay(sR,Nc)<0}function Eo(fc,mU,kk){return mU<fc?kk<=mU||fc<=kk:fc<kk&&kk<mU}function Zy(fc){let mU=0;return fc.seconds&&(mU+=1e3*fc.seconds),fc.minutes&&(mU+=60*fc.minutes*1e3),fc.hours&&(mU+=60*fc.hours*60*1e3),fc.days&&(mU+=24*fc.days*60*60*1e3),mU}function jK(fc){return Zy(fc)/1e3/60}function PU(fc,mU,kk){const xG=Date.UTC(kk.getUTCFullYear(),0,0,0,0,0,0),NC=Zy({days:1}),Ay=Math.floor((kk.getTime()-xG)/NC),Nc=90.83333333333333,sR=Math.PI/180,Eo=180/Math.PI,jK=mU/15;function PU(mU){const kk=Ay+((mU?6:18)-jK)/24,xG=.9856*kk-3.289;let NC=xG+1.916*Math.sin(xG*sR)+.02*Math.sin(2*xG*sR)+282.634;NC>360?NC-=360:NC<0&&(NC+=360);let PU=Eo*Math.atan(.91764*Math.tan(NC*sR));PU>360?PU-=360:PU<0&&(PU+=360);const wM=undefined,pR=undefined;PU+=90*Math.floor(NC/90)-90*Math.floor(PU/90),PU/=15;const fx=.39782*Math.sin(NC*sR),gW=Math.cos(Math.asin(fx)),ZR=(Math.cos(Nc*sR)-fx*Math.sin(fc*sR))/(gW*Math.cos(fc*sR));if(ZR>1)return{alwaysDay:!1,alwaysNight:!0,time:0};if(ZR<-1)return{alwaysDay:!0,alwaysNight:!1,time:0};const wZ=undefined,iR=undefined;let Vd=(mU?360-Eo*Math.acos(ZR):Eo*Math.acos(ZR))/15+PU-.06571*kk-6.622-jK;return Vd>24?Vd-=24:Vd<0&&(Vd+=24),{alwaysDay:!1,alwaysNight:!1,time:Math.round(Vd*Zy({hours:1}))}}const wM=PU(!0),pR=PU(!1);return wM.alwaysDay||pR.alwaysDay?{alwaysDay:!0}:wM.alwaysNight||pR.alwaysNight?{alwaysNight:!0}:{sunriseTime:wM.time,sunsetTime:pR.time}}function wM(fc,mU,kk=new Date){const xG=PU(fc,mU,kk);if(xG.alwaysDay)return!1;if(xG.alwaysNight)return!0;const NC=xG.sunriseTime,Ay=undefined,Nc=undefined;return Eo(xG.sunsetTime,NC,kk.getUTCHours()*Zy({hours:1})+kk.getUTCMinutes()*Zy({minutes:1})+kk.getUTCSeconds()*Zy({seconds:1})+kk.getUTCMilliseconds())}function pR(fc,mU,kk=new Date){const xG=PU(fc,mU,kk);if(xG.alwaysDay)return kk.getTime()+Zy({days:1});if(xG.alwaysNight)return kk.getTime()+Zy({days:1});const[NC,Ay]=xG.sunriseTime<xG.sunsetTime?[xG.sunriseTime,xG.sunsetTime]:[xG.sunsetTime,xG.sunriseTime],Nc=kk.getUTCHours()*Zy({hours:1})+kk.getUTCMinutes()*Zy({minutes:1})+kk.getUTCSeconds()*Zy({seconds:1})+kk.getUTCMilliseconds();return Nc<=NC?Date.UTC(kk.getUTCFullYear(),kk.getUTCMonth(),kk.getUTCDate(),0,0,0,NC):Nc<=Ay?Date.UTC(kk.getUTCFullYear(),kk.getUTCMonth(),kk.getUTCDate(),0,0,0,Ay):Date.UTC(kk.getUTCFullYear(),kk.getUTCMonth(),kk.getUTCDate()+1,0,0,0,NC)}Object.defineProperty(kk,"__esModule",{value:!0}),kk.nextTimeChangeAtLocation=kk.isNightAtLocation=kk.getDurationInMinutes=kk.getDuration=kk.isInTimeIntervalLocal=kk.nextTimeInterval=kk.parseTime=void 0,kk.parseTime=xG,kk.nextTimeInterval=Nc,kk.isInTimeIntervalLocal=sR,kk.getDuration=Zy,kk.getDurationInMinutes=jK,kk.isNightAtLocation=wM,kk.nextTimeChangeAtLocation=pR},{}],45:[function(fc,mU,kk){"use strict";function xG(fc){return(fc<16?"0":"")+fc.toString(16)}function NC(){if("randomUUID"in crypto){const fc=crypto.randomUUID();return fc.substring(0,8)+fc.substring(9,13)+fc.substring(14,18)+fc.substring(19,23)+fc.substring(24)}return Array.from(crypto.getRandomValues(new Uint8Array(16))).map((fc=>xG(fc))).join("")}Object.defineProperty(kk,"__esModule",{value:!0}),kk.generateUID=void 0,kk.generateUID=NC},{}],46:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.isLocalFile=kk.fullyQualifiedDomainMatchesWildcard=kk.isFullyQualifiedDomainWildcard=kk.isFullyQualifiedDomain=kk.isURLEnabled=kk.isPDF=kk.isURLMatched=kk.isURLInList=kk.compareURLPatterns=kk.getURLHostOrProtocol=kk.isRelativeHrefOnAbsolutePath=kk.getAbsoluteURL=kk.parseURL=kk.parsedURLCache=void 0;const xG=fc("./ipv6"),NC=!1;let Ay;function Nc(fc){return Ay||(Ay=document.createElement("a")),Ay.href=fc,Ay.href}function sR(fc,mU=null){const xG=`${fc}${mU?`;${mU}`:""}`;if(kk.parsedURLCache.has(xG))return kk.parsedURLCache.get(xG);if(mU){const NC=new URL(fc,Nc(mU));return kk.parsedURLCache.set(xG,NC),NC}const NC=new URL(Nc(fc));return kk.parsedURLCache.set(fc,NC),NC}function Eo(fc,mU){if(mU.match(/^data\\?\:/))return mU;if(/^\/\//.test(mU))return`${location.protocol}${mU}`;const kk=sR(fc),xG=undefined;return sR(mU,kk.href).href}function Zy(fc){if(fc.startsWith("data:"))return!0;const mU=sR(fc);return mU.protocol===location.protocol&&(mU.hostname===location.hostname&&(mU.port===location.port&&mU.pathname===location.pathname))}function jK(fc){const mU=new URL(fc);return mU.host?mU.host:"file:"===mU.protocol?mU.pathname:mU.protocol}function PU(fc,mU){return fc.localeCompare(mU)}function wM(fc,mU){for(let kk=0;kk<mU.length;kk++)if(pR(fc,mU[kk]))return!0;return!1}function pR(fc,mU){const kk=(0,xG.isIPV6)(fc),NC=(0,xG.isIPV6)(mU);if(kk&&NC)return(0,xG.compareIPV6)(fc,mU);if(!kk&&!NC){const kk=fx(mU);return null!==kk&&Boolean(fc.match(kk))}return!1}function fx(fc){try{const mU="^"===(fc=fc.trim())[0],kk="$"===fc[fc.length-1],xG=/\/\$?$/.test(fc);let NC,Ay,Nc;(NC=(fc=fc.replace(/^\^/,"").replace(/\$$/,"").replace(/^.*?\/{2,3}/,"").replace(/\?.*$/,"").replace(/\/$/,"")).indexOf("/"))>=0?(Ay=fc.substring(0,NC),Nc=fc.replace(/\$/g,"").substring(NC)):Ay=fc.replace(/\$/g,"");let sR=mU?"^(.*?\\:\\/{2,3})?":"^(.*?\\:\\/{2,3})?([^/]*?\\.)?";const Eo=Ay.split(".");sR+="(";for(let fc=0;fc<Eo.length;fc++)"*"===Eo[fc]&&(Eo[fc]="[^\\.\\/]+?");return sR+=Eo.join("\\."),sR+=")",Nc&&(sR+="(",sR+=Nc.replace("/","\\/"),sR+=")"),sR+=kk?"(\\/?(\\?[^/]*?)?)$":`(\\/${xG?"":"?"}.*?)$`,new RegExp(sR,"i")}catch(fc){return null}}function gW(fc){if(fc.includes(".pdf")){if(fc.includes("?")&&(fc=fc.substring(0,fc.lastIndexOf("?"))),fc.includes("#")&&(fc=fc.substring(0,fc.lastIndexOf("#"))),fc.match(/(wikipedia|wikimedia)\.org/i)&&fc.match(/(wikipedia|wikimedia)\.org\/.*\/[a-z]+\:[^\:\/]+\.pdf/i)||fc.match(/timetravel\.mementoweb\.org\/reconstruct/i)&&fc.match(/\.pdf$/i)||fc.match(/dropbox\.com\/s\//i)&&fc.match(/\.pdf$/i))return!1;if(!fc.endsWith(".pdf"))return!1;for(let mU=fc.length;mU>0;mU--){if("="===fc[mU])return!1;if("/"===fc[mU])return!0}}return!1}function ZR(fc,mU,{isProtected:kk,isInDarkList:xG,isDarkThemeDetected:Ay},Nc=!0){if(fQ(fc)&&!Nc)return!1;if(kk&&!mU.enableForProtectedPages)return!1;if(NC)return!0;if(gW(fc))return mU.enableForPDF;const sR=wM(fc,mU.siteList),Eo=wM(fc,mU.siteListEnabled);return mU.applyToListedOnly?Eo||sR:!!Eo||!(xG||mU.detectDarkTheme&&Ay)&&!sR}function wZ(fc){return/^[a-z0-9\.\-]+$/i.test(fc)&&-1===fc.indexOf("..")}function iR(fc){if(!fc.includes("*")||!/^[a-z0-9\.\-\*]+$/i.test(fc))return!1;const mU=fc.split(".");for(const fc of mU)if("*"!==fc&&!/^[a-z0-9\-]+$/i.test(fc))return!1;return!0}function Vd(fc,mU){const kk=fc.toLowerCase().split("."),xG=mU.toLowerCase().split(".");if(xG.length<kk.length)return!1;for(;kk.length;){const fc=kk.pop(),mU=xG.pop();if("*"!==fc&&fc!==mU)return!1}return!0}function fQ(fc){return fc&&fc.startsWith("file:///")}kk.parsedURLCache=new Map,kk.parseURL=sR,kk.getAbsoluteURL=Eo,kk.isRelativeHrefOnAbsolutePath=Zy,kk.getURLHostOrProtocol=jK,kk.compareURLPatterns=PU,kk.isURLInList=wM,kk.isURLMatched=pR,kk.isPDF=gW,kk.isURLEnabled=ZR,kk.isFullyQualifiedDomain=wZ,kk.isFullyQualifiedDomainWildcard=iR,kk.fullyQualifiedDomainMatchesWildcard=Vd,kk.isLocalFile=fQ},{"./ipv6":35}],47:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.documentIsVisible=kk.removeDocumentVisibilityListener=kk.setDocumentVisibilityListener=void 0;let xG=null,NC=!document.hidden;const Ay={capture:!0,passive:!0};function Nc(){document.addEventListener("visibilitychange",xG,Ay),window.addEventListener("pageshow",xG,Ay),window.addEventListener("focus",xG,Ay)}function sR(){document.removeEventListener("visibilitychange",xG,Ay),window.removeEventListener("pageshow",xG,Ay),window.removeEventListener("focus",xG,Ay)}function Eo(fc){const mU=Boolean(xG);xG=()=>{document.hidden||(Zy(),fc(),NC=!0)},mU||Nc()}function Zy(){sR(),xG=null}function jK(){return NC}kk.setDocumentVisibilityListener=Eo,kk.removeDocumentVisibilityListener=Zy,kk.documentIsVisible=jK},{}]},{},[1]);