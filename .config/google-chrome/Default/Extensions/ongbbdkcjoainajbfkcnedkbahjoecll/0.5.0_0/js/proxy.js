!function(){function fc(mU,kk,xG){function NC(Nc,sR){if(!kk[Nc]){if(!mU[Nc]){var Eo="function"==typeof require&&require;if(!sR&&Eo)return Eo(Nc,!0);if(Ay)return Ay(Nc,!0);var Zy=new Error("Cannot find module '"+Nc+"'");throw Zy.code="MODULE_NOT_FOUND",Zy}var jK=kk[Nc]={exports:{}};mU[Nc][0].call(jK.exports,(function(fc){var kk;return NC(mU[Nc][1][fc]||fc)}),jK,jK.exports,fc,mU,kk,xG)}return kk[Nc].exports}for(var Ay="function"==typeof require&&require,Nc=0;Nc<xG.length;Nc++)NC(xG[Nc]);return NC}return fc}()({1:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),fc("../../../darkmode-core/src/js/proxy")},{"../../../darkmode-core/src/js/proxy":7}],2:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.IMG_FILTER_ID=kk.MSG_CLEANUP=kk.ROOT_VARS_PREFIX=kk.META_PROPERTY=kk.STYLESHEET_COMMON_CLASSNAME=kk.PROXY_SELECTOR=kk.EVENT_PREFIX=kk.STYLESHEET_CORS_SELECTOR=kk.STYLESHEET_SYNC_SELECTOR=kk.STYLESHEET_ROOT_VARS_SELECTOR=kk.STYLESHEET_INLINE_SELECTOR=kk.STYLESHEET_OVERRIDE_SELECTOR=kk.STYLESHEET_VARIABLES_SELECTOR=kk.STYLESHEET_INVERT_SELECTOR=kk.STYLESHEET_TEXT_SELECTOR=kk.STYLESHEET_USER_AGENT_SELECTOR=kk.STYLESHEET_FALLBACK_SELECTOR=kk.MISC_PREFIX=void 0;const xG=fc("./prefix");kk.MISC_PREFIX=xG.PREFIX,kk.STYLESHEET_FALLBACK_SELECTOR=`.${xG.PREFIX}-fb`,kk.STYLESHEET_USER_AGENT_SELECTOR=`.${xG.PREFIX}-ua`,kk.STYLESHEET_TEXT_SELECTOR=`.${xG.PREFIX}-tx`,kk.STYLESHEET_INVERT_SELECTOR=`.${xG.PREFIX}-iv`,kk.STYLESHEET_VARIABLES_SELECTOR=`.${xG.PREFIX}-vb`,kk.STYLESHEET_OVERRIDE_SELECTOR=`.${xG.PREFIX}-or`,kk.STYLESHEET_INLINE_SELECTOR=`.${xG.PREFIX}-il`,kk.STYLESHEET_ROOT_VARS_SELECTOR=`.${xG.PREFIX}-rv`,kk.STYLESHEET_SYNC_SELECTOR=`.${xG.PREFIX}-sn`,kk.STYLESHEET_CORS_SELECTOR=`.${xG.PREFIX}-cr`,kk.EVENT_PREFIX=`__${xG.PREFIX}__`,kk.PROXY_SELECTOR=`.${xG.PREFIX}-pr`,kk.STYLESHEET_COMMON_CLASSNAME=`${xG.PREFIX}m2`,kk.META_PROPERTY=xG.PREFIX,kk.ROOT_VARS_PREFIX=xG.PREFIX,kk.MSG_CLEANUP=kk.EVENT_PREFIX+"cleanUp",kk.IMG_FILTER_ID=`${xG.PREFIX}-image-filter`},{"./prefix":6}],3:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.EVENT_ARG=void 0;const xG=fc("./stylesheet-proxy"),NC=fc("../utils/log"),Ay=fc("../../const");document.currentScript&&document.currentScript.remove();const Nc=`${Ay.MISC_PREFIX}ProxyInjected`,sR=`${Ay.EVENT_PREFIX}stylesheetProxy__done`;kk.EVENT_ARG=`${Ay.EVENT_PREFIX}stylesheetProxy__arg`;const Eo=!document.currentScript;function Zy(fc){(0,xG.injectProxy)(fc),wM(),document.dispatchEvent(new CustomEvent(sR))}function jK(){const fc=document.currentScript.dataset.arg;if(void 0!==fc){document.documentElement.dataset[Nc]="true";const mU=JSON.parse(fc);(0,NC.logInfo)(`MV3 proxy injector: regular path runs injectProxy(${mU}).`),Zy(mU)}}function PU(fc){document.removeEventListener(kk.EVENT_ARG,PU),void 0===document.documentElement.dataset[Nc]?(document.documentElement.dataset[Nc]="true",(0,NC.logInfo)(`MV3 proxy injector: ${Eo?"registerd":"dedicated"} path runs injectProxy(${fc.detail}).`),Zy(fc.detail)):(0,NC.logInfo)(`MV3 proxy injector: ${Eo?"registerd":"dedicated"} path exits because everything is done.`)}function wM(){document.removeEventListener(kk.EVENT_ARG,PU),document.removeEventListener(sR,wM)}function pR(){(0,NC.logInfo)(`MV3 proxy injector: ${Eo?"registerd":"dedicated"} path setup...`),document.addEventListener(kk.EVENT_ARG,PU),document.addEventListener(sR,wM)}function fx(){void 0===document.documentElement.dataset[Nc]?((0,NC.logInfo)("MV3 proxy injector: proxy attempts to inject..."),document.currentScript&&jK(),pR()):(0,NC.logInfo)("MV3 proxy injector: proxy exits because everything is done.")}fx()},{"../../const":2,"../utils/log":5,"./stylesheet-proxy":4}],4:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.injectProxy=void 0;const xG=fc("../../const");function NC(fc){document.dispatchEvent(new CustomEvent(`${xG.EVENT_PREFIX}inlineScriptsAllowed`));const mU=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"addRule"),kk=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"insertRule"),NC=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"deleteRule"),Ay=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"removeRule"),Nc=fc?Object.getOwnPropertyDescriptor(Document.prototype,"styleSheets"):null,sR=["baidu.com","baike.baidu.com","ditu.baidu.com","map.baidu.com","maps.baidu.com","haokan.baidu.com","pan.baidu.com","passport.baidu.com","tieba.baidu.com","www.baidu.com"].includes(location.hostname),Eo=sR?Object.getOwnPropertyDescriptor(Element.prototype,"getElementsByTagName"):null,Zy="www.vy.no"===location.hostname,jK=Zy?Object.getOwnPropertyDescriptor(Node.prototype,"childNodes"):null,PU=()=>{Object.defineProperty(CSSStyleSheet.prototype,"addRule",mU),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",kk),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",NC),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",Ay),document.removeEventListener(`${xG.EVENT_PREFIX}cleanUp`,PU),document.removeEventListener(`${xG.EVENT_PREFIX}addUndefinedResolver`,wM),fc&&Object.defineProperty(Document.prototype,"styleSheets",Nc),sR&&Object.defineProperty(Element.prototype,"getElementsByTagName",Eo),Zy&&Object.defineProperty(Node.prototype,"childNodes",jK)},wM=fc=>{customElements.whenDefined(fc.detail.tag).then((()=>{document.dispatchEvent(new CustomEvent(`${xG.EVENT_PREFIX}isDefined`,{detail:{tag:fc.detail.tag}}))}))};document.addEventListener(xG.MSG_CLEANUP,PU),document.addEventListener(`${xG.EVENT_PREFIX}addUndefinedResolver`,wM);const pR=new Event(`${xG.EVENT_PREFIX}updateSheet`);function fx(fc,kk,NC){return mU.value.call(this,fc,kk,NC),this.ownerNode&&!this.ownerNode.classList.contains(xG.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(pR),-1}function gW(fc,mU){const NC=kk.value.call(this,fc,mU);return this.ownerNode&&!this.ownerNode.classList.contains(xG.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(pR),NC}function ZR(fc){NC.value.call(this,fc),this.ownerNode&&!this.ownerNode.classList.contains(xG.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(pR)}function wZ(fc){Ay.value.call(this,fc),this.ownerNode&&!this.ownerNode.classList.contains(xG.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(pR)}function iR(){const fc=()=>{const fc=undefined,mU=[...Nc.get.call(this)].filter((fc=>fc.ownerNode&&!fc.ownerNode.classList.contains(xG.STYLESHEET_COMMON_CLASSNAME)));return mU.item=fc=>mU[fc],Object.setPrototypeOf(mU,StyleSheetList.prototype)};let mU=fc();const kk=undefined;return mU=new Proxy(mU,{get:function(mU,kk){return fc()[kk]}}),mU}function Vd(fc){if("style"!==fc)return Eo.value.call(this,fc);const mU=()=>{const mU=Eo.value.call(this,fc);return Object.setPrototypeOf([...mU].filter((fc=>!fc.classList.contains(xG.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)};let kk=mU();const NC=undefined;return kk=new Proxy(kk,{get:function(fc,kk){return mU()[Number(kk)||kk]}}),kk}function fQ(){const fc=jK.get.call(this);return Object.setPrototypeOf([...fc].filter((fc=>!fc.classList||!fc.classList.contains(xG.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)}Object.defineProperty(CSSStyleSheet.prototype,"addRule",Object.assign({},mU,{value:fx})),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",Object.assign({},kk,{value:gW})),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",Object.assign({},NC,{value:ZR})),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",Object.assign({},Ay,{value:wZ})),fc&&Object.defineProperty(Document.prototype,"styleSheets",Object.assign({},Nc,{get:iR})),sR&&Object.defineProperty(Element.prototype,"getElementsByTagName",Object.assign({},Eo,{value:Vd})),Zy&&Object.defineProperty(Node.prototype,"childNodes",Object.assign({},jK,{get:fQ}))}kk.injectProxy=NC},{"../../const":2}],5:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.logInfoCollapsed=kk.logWarn=kk.logInfo=void 0;const xG=fc("../../utils/message"),NC=!0,Ay=!1,Nc="info";function sR(fc,...mU){Ay&&Nc&&("info"===Nc||"warn"===fc)&&chrome.runtime.sendMessage({type:xG.MessageType.CS_LOG,data:{level:fc,log:mU}})}function Eo(...fc){NC&&sR("info",...fc)}function Zy(...fc){NC&&sR("warn",...fc)}function jK(fc,...mU){}kk.logInfo=Eo,kk.logWarn=Zy,kk.logInfoCollapsed=jK},{"../../utils/message":8}],6:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),kk.PREFIX=void 0,kk.PREFIX="dm"},{}],7:[function(fc,mU,kk){"use strict";Object.defineProperty(kk,"__esModule",{value:!0}),fc("./content/dynamic-theme/mv3-proxy")},{"./content/dynamic-theme/mv3-proxy":3}],8:[function(fc,mU,kk){"use strict";var xG;Object.defineProperty(kk,"__esModule",{value:!0}),kk.MessageType=void 0,function(fc){fc["UI_GET_DATA"]="ui-get-data",fc["UI_GET_DEVTOOLS_DATA"]="ui-get-devtools-data",fc["UI_SUBSCRIBE_TO_CHANGES"]="ui-subscribe-to-changes",fc["UI_UNSUBSCRIBE_FROM_CHANGES"]="ui-unsubscribe-from-changes",fc["UI_CHANGE_SETTINGS"]="ui-change-settings",fc["UI_SET_THEME"]="ui-set-theme",fc["UI_TOGGLE_ACTIVE_TAB"]="ui-toggle-active-tab",fc["UI_MARK_NEWS_AS_READ"]="ui-mark-news-as-read",fc["UI_MARK_NEWS_AS_DISPLAYED"]="ui-mark-news-as-displayed",fc["UI_LOAD_CONFIG"]="ui-load-config",fc["UI_APPLY_DEV_DYNAMIC_THEME_FIXES"]="ui-apply-dev-dynamic-theme-fixes",fc["UI_RESET_DEV_DYNAMIC_THEME_FIXES"]="ui-reset-dev-dynamic-theme-fixes",fc["UI_APPLY_DEV_INVERSION_FIXES"]="ui-apply-dev-inversion-fixes",fc["UI_RESET_DEV_INVERSION_FIXES"]="ui-reset-dev-inversion-fixes",fc["UI_APPLY_DEV_STATIC_THEMES"]="ui-apply-dev-static-themes",fc["UI_RESET_DEV_STATIC_THEMES"]="ui-reset-dev-static-themes",fc["UI_SAVE_FILE"]="ui-save-file",fc["UI_REQUEST_EXPORT_CSS"]="ui-request-export-css",fc["UI_COLOR_SCHEME_CHANGE"]="ui-color-scheme-change",fc["BG_CHANGES"]="bg-changes",fc["BG_ADD_CSS_FILTER"]="bg-add-css-filter",fc["BG_ADD_STATIC_THEME"]="bg-add-static-theme",fc["BG_ADD_SVG_FILTER"]="bg-add-svg-filter",fc["BG_ADD_DYNAMIC_THEME"]="bg-add-dynamic-theme",fc["BG_EXPORT_CSS"]="bg-export-css",fc["BG_UNSUPPORTED_SENDER"]="bg-unsupported-sender",fc["BG_CLEAN_UP"]="bg-clean-up",fc["BG_RELOAD"]="bg-reload",fc["BG_FETCH_RESPONSE"]="bg-fetch-response",fc["BG_UI_UPDATE"]="bg-ui-update",fc["BG_CSS_UPDATE"]="bg-css-update",fc["CS_COLOR_SCHEME_CHANGE"]="cs-color-scheme-change",fc["CS_FRAME_CONNECT"]="cs-frame-connect",fc["CS_FRAME_FORGET"]="cs-frame-forget",fc["CS_FRAME_FREEZE"]="cs-frame-freeze",fc["CS_FRAME_RESUME"]="cs-frame-resume",fc["CS_EXPORT_CSS_RESPONSE"]="cs-export-css-response",fc["CS_FETCH"]="cs-fetch",fc["CS_DARK_THEME_DETECTED"]="cs-dark-theme-detected",fc["CS_DARK_THEME_NOT_DETECTED"]="cs-dark-theme-not-detected",fc["CS_LOG"]="cs-log"}(xG=kk.MessageType||(kk.MessageType={}))},{}]},{},[1]);